<!DOCTYPE html><html lang="zh-CN" class="bg-[var(--page-bg)] transition text-[14px] md:text-[16px]" data-overlayscrollbars-initialize data-astro-cid-sckkx6r4 style="--bannerOffset: 30vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 305;--page-width: 75rem;"> <head><title>梦璃酱 - YumeYuka Blog of Dreams</title><meta charset="UTF-8"><meta name="description" content="梦璃酱 - YumeYuka Blog of Dreams"><meta name="author" content="梦璃酱"><!-- Open Graph 标签 --><meta property="og:site_name" content="梦璃酱"><meta property="og:locale" content="zh_CN"><meta property="og:url" content="https://www.yumeyuka.plus/"><meta property="og:title" content="梦璃酱 - YumeYuka Blog of Dreams"><meta property="og:description" content="梦璃酱 - YumeYuka Blog of Dreams"><meta property="og:image" content="https://s3.yumeyuka.plus/2025/23-22-30.webp"><meta property="og:image:secure_url" content="https://s3.yumeyuka.plus/2025/23-22-30.webp"><meta property="og:image:alt" content="梦璃酱 - YumeYuka Blog of Dreams"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:image:type" content="image/webp"><meta property="og:type" content="website"><!-- Twitter 卡片标签 --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="梦璃酱"><meta property="twitter:url" content="https://www.yumeyuka.plus/"><meta name="twitter:title" content="梦璃酱 - YumeYuka Blog of Dreams"><meta name="twitter:description" content="梦璃酱 - YumeYuka Blog of Dreams"><meta name="twitter:image" content="https://s3.yumeyuka.plus/2025/23-22-30.webp"><meta name="twitter:image:alt" content="梦璃酱 - YumeYuka Blog of Dreams"><!-- Telegram 专用标签 --><meta property="telegram:channel" content="@yumeyuka"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.13.10"><link rel="icon" href="/favicon/yumeyuka.jpg"><script src="/js/umami-share.js" defer></script><script defer src="https://cloud.umami.is/script.js" data-website-id="7e33bb18-7b91-4a21-862a-0a00880c04c6"></script><!-- Set the theme before the page is rendered to avoid a flash --><script>(function(){const DEFAULT_THEME = "auto";
const LIGHT_MODE = "light";
const DARK_MODE = "dark";
const AUTO_MODE = "auto";
const BANNER_HEIGHT_EXTEND = 30;
const PAGE_WIDTH = 75;
const configHue = 305;

			// Load the theme from local storage
			const theme = localStorage.getItem('theme') || DEFAULT_THEME;
			switch (theme) {
				case LIGHT_MODE:
					document.documentElement.classList.remove('dark');
					break
				case DARK_MODE:
					document.documentElement.classList.add('dark');
					break
				case AUTO_MODE:
					if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
						document.documentElement.classList.add('dark');
					} else {
						document.documentElement.classList.remove('dark');
					}
			}

			// Load the hue from local storage
			const hue = localStorage.getItem('hue') || configHue;
			document.documentElement.style.setProperty('--hue', hue);

			// calculate the --banner-height-extend, which needs to be a multiple of 4 to avoid blurry text
			let offset = Math.floor(window.innerHeight * (BANNER_HEIGHT_EXTEND / 100));
			offset = offset - offset % 4;
			document.documentElement.style.setProperty('--banner-height-extend', `${offset}px`);
		})();</script><!-- defines global css variables. This will be applied to <html> <body> and some other elements idk why --><link rel="alternate" type="application/rss+xml" title="梦璃酱" href="https://www.yumeyuka.plus/rss.xml"><link rel="stylesheet" href="/_astro/Layout.DSulWsr7.css">
<link rel="stylesheet" href="/_astro/Layout.y4KPJ9hc.css">
<link rel="stylesheet" href="/_astro/_page_.CdMdQeZu.css">
<link rel="stylesheet" href="/_astro/_page_.CVX5V_s2.css">
<link rel="stylesheet" href="/_astro/about.BtniRLn_.css">
<style>.friend-card[data-astro-cid-spp2p3no]{display:flex;flex-direction:column;gap:.25rem;border-radius:.5rem;background-color:var(--card-bg);padding:1rem}.friend-card[data-astro-cid-spp2p3no]:hover{background-color:#0000000d}.friend-card[data-astro-cid-spp2p3no]:hover:is(.dark *){background-color:#ffffff0d}.friend-card[data-astro-cid-spp2p3no]{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.friend-card[data-astro-cid-spp2p3no]:active{scale:.98;background-color:var(--btn-regular-bg-active)}.friend-card[data-astro-cid-spp2p3no]:hover{background-color:var(--btn-regular-bg-hover)}.friend-card[data-astro-cid-spp2p3no]:hover .font-bold[data-astro-cid-spp2p3no]{color:var(--btn-content)}.friend-card[data-astro-cid-spp2p3no]:hover .text-sm[data-astro-cid-spp2p3no]{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.friend-card[data-astro-cid-spp2p3no]:hover .text-sm[data-astro-cid-spp2p3no]:is(.dark *){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.friend-card[data-astro-cid-spp2p3no] .font-bold[data-astro-cid-spp2p3no],.friend-card[data-astro-cid-spp2p3no] .text-sm[data-astro-cid-spp2p3no]{transition-property:color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}
input.svelte-1wah7ro:focus{outline:0}.search-panel.svelte-1wah7ro{max-height:calc(100vh - 100px);overflow-y:auto}#display-setting.svelte-d7tq3k input[type=range]:where(.svelte-d7tq3k){-webkit-appearance:none;height:1.5rem;background-image:var(--color-selection-bar);transition:background-image .15s ease-in-out}#display-setting.svelte-d7tq3k input[type=range]:where(.svelte-d7tq3k)::-webkit-slider-thumb{-webkit-appearance:none;height:1rem;width:.5rem;border-radius:.125rem;background:#ffffffb3;box-shadow:none}#display-setting.svelte-d7tq3k input[type=range]:where(.svelte-d7tq3k)::-webkit-slider-thumb:hover{background:#fffc}#display-setting.svelte-d7tq3k input[type=range]:where(.svelte-d7tq3k)::-webkit-slider-thumb:active{background:#fff9}#display-setting.svelte-d7tq3k input[type=range]:where(.svelte-d7tq3k)::-moz-range-thumb{-webkit-appearance:none;height:1rem;width:.5rem;border-radius:.125rem;border-width:0;background:#ffffffb3;box-shadow:none}#display-setting.svelte-d7tq3k input[type=range]:where(.svelte-d7tq3k)::-moz-range-thumb:hover{background:#fffc}#display-setting.svelte-d7tq3k input[type=range]:where(.svelte-d7tq3k)::-moz-range-thumb:active{background:#fff9}#display-setting.svelte-d7tq3k input[type=range]:where(.svelte-d7tq3k)::-ms-thumb{-webkit-appearance:none;height:1rem;width:.5rem;border-radius:.125rem;background:#ffffffb3;box-shadow:none}#display-setting.svelte-d7tq3k input[type=range]:where(.svelte-d7tq3k)::-ms-thumb:hover{background:#fffc}#display-setting.svelte-d7tq3k input[type=range]:where(.svelte-d7tq3k)::-ms-thumb:active{background:#fff9}
</style><script type="module" src="/_astro/page.Z8IJTFqj.js"></script></head> <body class=" min-h-screen transition  lg:is-home enable-banner" data-overlayscrollbars-initialize data-astro-cid-sckkx6r4 style="--bannerOffset: 30vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 305;--page-width: 75rem;"> <div id="config-carrier" data-hue="305"></div>    <div id="top-row" class="z-50 pointer-events-none relative transition-all duration-700 max-w-[var(--page-width)] px-0 md:px-4 mx-auto"> <div id="navbar-wrapper" class="pointer-events-auto sticky top-0 transition-all"> <div id="navbar" class="z-50 onload-animation"> <div class="absolute h-8 left-0 right-0 -top-8 bg-[var(--card-bg)] transition"></div> <!-- used for onload animation --> <div class="card-base !overflow-visible max-w-[var(--page-width)] h-[4.5rem] !rounded-t-none mx-auto flex items-center justify-between px-4"> <a href="/" class="btn-plain scale-animation rounded-lg h-[3.25rem] px-5 font-bold active:scale-95"> <div class="flex flex-row text-[var(--primary)] items-center text-md"> <svg width="1em" height="1em" class="text-[1.75rem] mb-1 mr-2" data-icon="material-symbols:home-outline-rounded">   <symbol id="ai:material-symbols:home-outline-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M6 19h3v-5q0-.425.288-.712T10 13h4q.425 0 .713.288T15 14v5h3v-9l-6-4.5L6 10zm-2 0v-9q0-.475.213-.9t.587-.7l6-4.5q.525-.4 1.2-.4t1.2.4l6 4.5q.375.275.588.7T20 10v9q0 .825-.588 1.413T18 21h-4q-.425 0-.712-.288T13 20v-5h-2v5q0 .425-.288.713T10 21H6q-.825 0-1.412-.587T4 19m8-6.75"/></symbol><use href="#ai:material-symbols:home-outline-rounded"></use>  </svg> 梦璃酱 </div> </a> <div class="hidden md:flex"> <a aria-label="主页" href="/" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95"> <div class="flex items-center"> 主页  </div> </a><a aria-label="归档" href="/archive/" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95"> <div class="flex items-center"> 归档  </div> </a><a aria-label="关于" href="/about/" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95"> <div class="flex items-center"> 关于  </div> </a><a aria-label="友链" href="/friends/" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95"> <div class="flex items-center"> 友链  </div> </a><a aria-label="统计" href="https://eu.umami.is/share/QA4C7dikiZNVwva3" target="_blank" class="btn-plain scale-animation rounded-lg h-11 font-bold px-5 active:scale-95"> <div class="flex items-center"> 统计 <svg width="1em" height="1em" viewBox="0 0 512 512" class="text-[0.875rem] transition -translate-y-[1px] ml-1 text-black/[0.2] dark:text-white/[0.2]" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </div> </a> </div> <div class="flex"> <!--<SearchPanel client:load>--> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="2o2uMp" component-url="/_astro/Search.Dt-cF_nP.js" component-export="default" renderer-url="/_astro/client.svelte.BsgZq5BR.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;Search&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <button aria-label="Display Settings" class="btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90" id="display-settings-switch"> <svg width="1em" height="1em" class="text-[1.25rem]" data-icon="material-symbols:palette-outline">   <symbol id="ai:material-symbols:palette-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M12 22q-2.05 0-3.875-.788t-3.187-2.15t-2.15-3.187T2 12q0-2.075.813-3.9t2.2-3.175T8.25 2.788T12.2 2q2 0 3.775.688t3.113 1.9t2.125 2.875T22 11.05q0 2.875-1.75 4.413T16 17h-1.85q-.225 0-.312.125t-.088.275q0 .3.375.863t.375 1.287q0 1.25-.687 1.85T12 22m-5.5-9q.65 0 1.075-.425T8 11.5t-.425-1.075T6.5 10t-1.075.425T5 11.5t.425 1.075T6.5 13m3-4q.65 0 1.075-.425T11 7.5t-.425-1.075T9.5 6t-1.075.425T8 7.5t.425 1.075T9.5 9m5 0q.65 0 1.075-.425T16 7.5t-.425-1.075T14.5 6t-1.075.425T13 7.5t.425 1.075T14.5 9m3 4q.65 0 1.075-.425T19 11.5t-.425-1.075T17.5 10t-1.075.425T16 11.5t.425 1.075T17.5 13M12 20q.225 0 .363-.125t.137-.325q0-.35-.375-.825T11.75 17.3q0-1.05.725-1.675T14.25 15H16q1.65 0 2.825-.962T20 11.05q0-3.025-2.312-5.038T12.2 4Q8.8 4 6.4 6.325T4 12q0 3.325 2.338 5.663T12 20"/></symbol><use href="#ai:material-symbols:palette-outline"></use>  </svg> </button> <astro-island uid="ZCzvmj" component-url="/_astro/LightDarkSwitch.BfkJpN20.js" component-export="default" renderer-url="/_astro/client.svelte.BsgZq5BR.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;LightDarkSwitch&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> <button aria-label="Menu" name="Nav Menu" class="btn-plain scale-animation rounded-lg w-11 h-11 active:scale-90 md:!hidden" id="nav-menu-switch"> <svg width="1em" height="1em" class="text-[1.25rem]" data-icon="material-symbols:menu-rounded">   <symbol id="ai:material-symbols:menu-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M4 18q-.425 0-.712-.288T3 17t.288-.712T4 16h16q.425 0 .713.288T21 17t-.288.713T20 18zm0-5q-.425 0-.712-.288T3 12t.288-.712T4 11h16q.425 0 .713.288T21 12t-.288.713T20 13zm0-5q-.425 0-.712-.288T3 7t.288-.712T4 6h16q.425 0 .713.288T21 7t-.288.713T20 8z"/></symbol><use href="#ai:material-symbols:menu-rounded"></use>  </svg> </button> </div> <div id="nav-menu-panel" class="float-panel float-panel-closed absolute transition-all fixed right-4 px-2 py-2"> <a href="/" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
            hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
        "> <div class="transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]"> 主页 </div> <svg width="1em" height="1em" class="transition text-[1.25rem] text-[var(--primary)]" data-icon="material-symbols:chevron-right-rounded">   <symbol id="ai:material-symbols:chevron-right-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M12.6 12L8.7 8.1q-.275-.275-.275-.7t.275-.7t.7-.275t.7.275l4.6 4.6q.15.15.213.325t.062.375t-.062.375t-.213.325l-4.6 4.6q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7z"/></symbol><use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg>  </a><a href="/archive/" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
            hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
        "> <div class="transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]"> 归档 </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)]" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg>  </a><a href="/about/" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
            hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
        "> <div class="transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]"> 关于 </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)]" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg>  </a><a href="/friends/" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
            hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
        "> <div class="transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]"> 友链 </div> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition text-[1.25rem] text-[var(--primary)]" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg>  </a><a href="https://eu.umami.is/share/QA4C7dikiZNVwva3" class="group flex justify-between items-center py-2 pl-3 pr-1 rounded-lg gap-8
            hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] transition
        " target="_blank"> <div class="transition text-black/75 dark:text-white/75 font-bold group-hover:text-[var(--primary)] group-active:text-[var(--primary)]"> 统计 </div>  <svg width="1em" height="1em" viewBox="0 0 512 512" class="transition text-[0.75rem] text-black/25 dark:text-white/25 -translate-x-1" data-icon="fa6-solid:arrow-up-right-from-square">   <use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a> </div> <astro-island uid="ZPL4UN" component-url="/_astro/DisplaySettings.BYq_CJG5.js" component-export="default" renderer-url="/_astro/client.svelte.BsgZq5BR.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;DisplaySettings&quot;,&quot;value&quot;:&quot;svelte&quot;}"></astro-island> </div> </div> <script type="module">function c(){localStorage.theme==="dark"?(document.documentElement.classList.remove("dark"),localStorage.theme="light"):(document.documentElement.classList.add("dark"),localStorage.theme="dark")}function o(){let t=document.getElementById("scheme-switch");t&&(t.onclick=function(){c()});let n=document.getElementById("display-settings-switch");n&&(n.onclick=function(){let e=document.getElementById("display-setting");e&&e.classList.toggle("float-panel-closed")});let l=document.getElementById("nav-menu-switch");l&&(l.onclick=function(){let e=document.getElementById("nav-menu-panel");e&&e.classList.toggle("float-panel-closed")})}o();</script> <script>(function(){const scriptUrl = "/pagefind/pagefind.js";

async function loadPagefind() {
    try {
        const response = await fetch(scriptUrl, { method: 'HEAD' });
        if (!response.ok) {
            throw new Error(`Pagefind script not found: ${response.status}`);
        }

        const pagefind = await import(scriptUrl);

        await pagefind.options({
            excerptLength: 20
        });

        window.pagefind = pagefind;

        document.dispatchEvent(new CustomEvent('pagefindready'));
        console.log('Pagefind loaded and initialized successfully, event dispatched.');
    } catch (error) {
        console.error('Failed to load Pagefind:', error);
        window.pagefind = {
            search: () => Promise.resolve({ results: [] }),
            options: () => Promise.resolve(),
        };
        document.dispatchEvent(new CustomEvent('pagefindloaderror'));
        console.log('Pagefind load error, event dispatched.');
    }
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadPagefind);
} else {
    loadPagefind();
}
})();</script> </div> </div>  <div id="banner-wrapper" class="absolute z-10 w-full transition duration-700 overflow-hidden" style="top: -30vh"> <div id="banner" class="object-cover h-full transition duration-700 opacity-0 scale-105 overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div> <img src="/_astro/Wallpaper2.BH30lk3c_2fhiDT.webp" alt="Banner image of the blog" style="object-position: top" loading="lazy" decoding="async" fetchpriority="auto" width="2667" height="1500" class="w-full h-full object-cover">  </div> </div> <div class="absolute w-full z-30 pointer-events-none" style="top: calc(35vh - 3.5rem)"> <!-- The pointer-events-none here prevent blocking the click event of the TOC --> <div class="relative max-w-[var(--page-width)] mx-auto pointer-events-auto"> <div id="main-grid" class="transition duration-700 w-full left-0 right-0 grid grid-cols-[17.5rem_auto] grid-rows-[auto_1fr_auto] lg:grid-rows-[auto]
    mx-auto gap-4 px-0 md:px-4"> <!-- Banner image credit --> <a href="https://www.pixiv.net/artworks/113845204" id="banner-credit" target="_blank" rel="noopener" aria-label="Visit image source" class="group onload-animation transition-all absolute flex justify-center items-center rounded-full px-3 right-4 -top-[3.25rem] bg-black/60 hover:bg-black/70 h-9 hover:pr-9 active:bg-black/80"> <svg width="1em" height="1em" class="text-white/75 text-[1.25rem] mr-1" data-icon="material-symbols:copyright-outline-rounded">   <symbol id="ai:material-symbols:copyright-outline-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m-2-4h4q.425 0 .713-.288T15 15v-1q0-.425-.288-.712T14 13t-.712.288T13 14h-2v-4h2q0 .425.288.713T14 11t.713-.288T15 10V9q0-.425-.288-.712T14 8h-4q-.425 0-.712.288T9 9v6q0 .425.288.713T10 16"/></symbol><use href="#ai:material-symbols:copyright-outline-rounded"></use>  </svg> <div class="text-white/75 text-xs">Memory Sketchbook</div> <svg width="1em" height="1em" class="transition absolute text-[oklch(0.75_0.14_var(--hue))] right-4 text-[0.75rem] opacity-0 group-hover:opacity-100" data-icon="fa6-solid:arrow-up-right-from-square">   <symbol id="ai:fa6-solid:arrow-up-right-from-square" viewBox="0 0 512 512"><path fill="currentColor" d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32zM80 32C35.8 32 0 67.8 0 112v320c0 44.2 35.8 80 80 80h320c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v112c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16h112c17.7 0 32-14.3 32-32s-14.3-32-32-32z"/></symbol><use href="#ai:fa6-solid:arrow-up-right-from-square"></use>  </svg> </a> <div id="sidebar" class="mb-4 row-start-2 row-end-3 col-span-2 lg:row-start-1 lg:row-end-2 lg:col-span-1 lg:max-w-[17.5rem] onload-animation w-full"> <div class="flex flex-col w-full gap-4 mb-4"> <div class="card-base p-3"> <a aria-label="Go to About Page" href="/about/" class="group block relative mx-auto mt-1 lg:mx-0 lg:mt-0 mb-3
       max-w-[12rem] lg:max-w-none overflow-hidden rounded-xl active:scale-95"> <div class="absolute transition pointer-events-none group-hover:bg-black/30 group-active:bg-black/50
        w-full h-full z-50 flex items-center justify-center"> <svg width="1.13em" height="1em" class="transition opacity-0 scale-90 group-hover:scale-100 group-hover:opacity-100 text-white text-5xl" data-icon="fa6-regular:address-card">   <symbol id="ai:fa6-regular:address-card" viewBox="0 0 576 512"><path fill="currentColor" d="M512 80c8.8 0 16 7.2 16 16v320c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16zM64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64zm144 224a64 64 0 1 0 0-128a64 64 0 1 0 0 128m-32 32c-44.2 0-80 35.8-80 80c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16c0-44.2-35.8-80-80-80zm200-144c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/></symbol><use href="#ai:fa6-regular:address-card"></use>  </svg> </div> <div class="mx-auto lg:w-full h-full lg:mt-0  overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div> <img src="/_astro/YumeYuka.Jm7n0nm9_Zps9ia.webp" alt="Profile Image of the Author" style="object-position: center" loading="lazy" decoding="async" fetchpriority="auto" width="1255" height="1255" class="w-full h-full object-cover">  </div> </a> <div class="px-2"> <div class="font-bold text-xl text-center mb-1 dark:text-neutral-50 transition">梦璃酱</div> <div class="h-1 w-5 bg-[var(--primary)] mx-auto rounded-full mb-2 transition"></div> <div class="text-center text-neutral-400 mb-2.5 transition">一つの心臓の両面に傷を負う</div> <div class="flex flex-wrap gap-2 justify-center mb-1"> <a rel="me" aria-label="GitHub" href="https://github.com/YumeYuka" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="0.97em" height="1em" class="text-[1.5rem]" data-icon="fa6-brands:github">   <symbol id="ai:fa6-brands:github" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6c-3.3.3-5.6-1.3-5.6-3.6c0-2 2.3-3.6 5.2-3.6c3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9c2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9c.3 2 2.9 3.3 5.9 2.6c2.9-.7 4.9-2.6 4.6-4.6c-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2c12.8 2.3 17.3-5.6 17.3-12.1c0-6.2-.3-40.4-.3-61.4c0 0-70 15-84.7-29.8c0 0-11.4-29.1-27.8-36.6c0 0-22.9-15.7 1.6-15.4c0 0 24.9 2 38.6 25.8c21.9 38.6 58.6 27.5 72.9 20.9c2.3-16 8.8-27.1 16-33.7c-55.9-6.2-112.3-14.3-112.3-110.5c0-27.5 7.6-41.3 23.6-58.9c-2.6-6.5-11.1-33.3 2.6-67.9c20.9-6.5 69 27 69 27c20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27c13.7 34.7 5.2 61.4 2.6 67.9c16 17.7 25.8 31.5 25.8 58.9c0 96.5-58.9 104.2-114.8 110.5c9.2 7.9 17 22.9 17 46.4c0 33.7-.3 75.4-.3 83.6c0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252C496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2c1.6 1.6 3.9 2.3 5.2 1c1.3-1 1-3.3-.7-5.2c-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9c1.6 1 3.6.7 4.3-.7c.7-1.3-.3-2.9-2.3-3.9c-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2c2.3 2.3 5.2 2.6 6.5 1c1.3-1.3.7-4.3-1.3-6.2c-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2c-1.4-2.3-4-3.3-5.6-2"/></symbol><use href="#ai:fa6-brands:github"></use>  </svg> </a><a rel="me" aria-label="QQ" href="https://join.oom-wg.dev" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="0.88em" height="1em" class="text-[1.5rem]" data-icon="fa6-brands:qq">   <symbol id="ai:fa6-brands:qq" viewBox="0 0 448 512"><path fill="currentColor" d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741c0 31.345-16.136 72.247-51.051 101.786c16.842 5.192 54.843 19.167 45.803 34.421c-7.316 12.343-125.51 7.881-159.632 4.037c-34.122 3.844-152.316 8.306-159.632-4.037c-9.045-15.25 28.918-29.214 45.783-34.415c-34.92-29.539-51.059-70.445-51.059-101.792c0 0-33.334 54.134-44.859 52.741c-5.37-.65-12.424-29.644 9.347-99.704c10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963c18.118 45.223 29.912 72.85 40.144 105.778c21.768 70.06 14.716 99.053 9.346 99.704"/></symbol><use href="#ai:fa6-brands:qq"></use>  </svg> </a><a rel="me" aria-label="Tg" href="https://t.me/YumeYuka" target="_blank" class="btn-regular rounded-lg h-10 w-10 active:scale-90"> <svg width="0.97em" height="1em" class="text-[1.5rem]" data-icon="fa6-brands:telegram">   <symbol id="ai:fa6-brands:telegram" viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248s248-111.033 248-248S384.967 8 248 8m114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3c-3.476 18.584-10.322 24.816-16.948 25.425c-14.4 1.326-25.338-9.517-39.287-18.661c-21.827-14.308-34.158-23.215-55.346-37.177c-24.485-16.135-8.612-25 5.342-39.5c3.652-3.793 67.107-61.51 68.335-66.746c.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142q-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123c-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7q108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789c2.052-.034 6.639.474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716a43.8 43.8 0 0 1 .417 9.769"/></symbol><use href="#ai:fa6-brands:telegram"></use>  </svg> </a>  </div> <!-- 全站访问量统计 --> <div class="text-center text-sm text-neutral-500 dark:text-neutral-400 mt-3 pt-3 border-t border-neutral-200 dark:border-neutral-700"> <div class="flex items-center justify-center gap-1"> <svg width="1em" height="1em" class="text-base" data-icon="material-symbols:visibility-outline">   <symbol id="ai:material-symbols:visibility-outline" viewBox="0 0 24 24"><path fill="currentColor" d="M12 16q1.875 0 3.188-1.312T16.5 11.5t-1.312-3.187T12 7T8.813 8.313T7.5 11.5t1.313 3.188T12 16m0-1.8q-1.125 0-1.912-.788T9.3 11.5t.788-1.912T12 8.8t1.913.788t.787 1.912t-.787 1.913T12 14.2m0 4.8q-3.65 0-6.65-2.037T1 11.5q1.35-3.425 4.35-5.462T12 4t6.65 2.038T23 11.5q-1.35 3.425-4.35 5.463T12 19m0-2q2.825 0 5.188-1.487T20.8 11.5q-1.25-2.525-3.613-4.012T12 6T6.813 7.488T3.2 11.5q1.25 2.525 3.613 4.013T12 17"/></symbol><use href="#ai:material-symbols:visibility-outline"></use>  </svg> <span id="site-stats">统计加载中...</span> </div> </div> </div> </div> <script>(function(){const umamiConfig = {"enable":true,"baseUrl":"https://eu.umami.is","shareId":"QA4C7dikiZNVwva3","timezone":"Asia/Shanghai"};
const unavailableText = "统计不可用。请检查是否屏蔽了Umami域名，如AdGuard和AdBlock等插件";
const viewsText = "浏览";
const visitsText = "访客";

    // 获取全站访问量统计
    // 客户端统计文案生成函数
    function generateStatsText(pageViews, visits) {
        return `${viewsText} ${pageViews} · ${visitsText} ${visits}`;
    }

    async function loadSiteStats() {
        if (!umamiConfig.enable) {
            return;
        }

        try {
            // 调用全局工具获取 Umami 分享数据
            const { websiteId, token } = await getUmamiShareData(umamiConfig.baseUrl, umamiConfig.shareId);

            // 第二步：获取全站统计数据（不指定url参数获取全站数据）
            const currentTimestamp = Date.now();
            const statsUrl = `${umamiConfig.baseUrl}/api/websites/${websiteId}/stats?startAt=0&endAt=${currentTimestamp}&unit=hour&timezone=${encodeURIComponent(umamiConfig.timezone)}&compare=false`;

            const statsResponse = await fetch(statsUrl, {
                headers: {
                    'x-umami-share-token': token
                }
            });

            if (statsResponse.status === 401) {
                // token 失效，清理缓存后重新获取一次
                clearUmamiShareCache();
                return await loadSiteStats();
            }

            if (!statsResponse.ok) {
                throw new Error('获取统计数据失败');
            }

            const statsData = await statsResponse.json();
            const pageviews = statsData.pageviews?.value || 0;
            const visitors = statsData.visits?.value || 0;

            const statsElement = document.getElementById('site-stats');
            if (statsElement) {
                statsElement.textContent = generateStatsText(pageviews, visitors);
            }
        } catch (error) {
            console.error('获取全站统计失败:', error);
            const statsElement = document.getElementById('site-stats');
            if (statsElement) {
                statsElement.textContent = unavailableText;
            }
        }
    }

    // 页面加载完成后获取统计数据
    document.addEventListener('DOMContentLoaded', loadSiteStats);
})();</script> </div> <div id="sidebar-sticky" class="transition-all duration-700 flex flex-col w-full gap-4 top-4 sticky top-4"> <widget-layout data-id="categories" data-is-collapsed="false" class="pb-4 card-base onload-animation" style="animation-delay: 150ms; --collapsedHeight: 7.5rem;" data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;">分类</div> <div id="categories" class="collapse-wrapper px-4 overflow-hidden" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;"> <a href="/archive/?category=%E7%9F%A5%E8%AF%86" aria-label="View all posts in the 知识 category"> <button class="
            w-full
            h-10
            rounded-lg
            bg-none
            hover:bg-[var(--btn-plain-bg-hover)]
            active:bg-[var(--btn-plain-bg-active)]
            transition-all
            pl-2
            hover:pl-3
            
            text-neutral-700
            hover:text-[var(--primary)]
            dark:text-neutral-300
            dark:hover:text-[var(--primary)]
        "> <div class="flex items-center justify-between relative mr-2"> <div class="overflow-hidden text-left whitespace-nowrap overflow-ellipsis  "> 知识 </div> <div class="transition px-2 h-7 ml-4 min-w-[2rem] rounded-lg text-sm font-bold
                    text-[var(--btn-content)] dark:text-[var(--deep-text)]
                    bg-[var(--btn-regular-bg)] dark:bg-[var(--primary)]
                    flex items-center justify-center"> 5 </div> </div> </button> </a> </div>  </widget-layout>  <script type="module">class d extends HTMLElement{constructor(){if(super(),this.dataset.isCollapsed!=="true")return;const e=this.dataset.id,t=this.querySelector(".expand-btn"),s=this.querySelector(`#${e}`);t.addEventListener("click",()=>{s.classList.remove("collapsed"),t.classList.add("hidden")})}}customElements.get("widget-layout")||customElements.define("widget-layout",d);</script> <widget-layout data-id="tags" data-is-collapsed="false" class="pb-4 card-base onload-animation" style="animation-delay: 200ms; --collapsedHeight: 7.5rem;" data-astro-cid-ucso7hve="true"> <div class="font-bold transition text-lg text-neutral-900 dark:text-neutral-100 relative ml-8 mt-4 mb-2
        before:w-1 before:h-4 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:left-[-16px] before:top-[5.5px]" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;">标签</div> <div id="tags" class="collapse-wrapper px-4 overflow-hidden" data-astro-cid-ucso7hve style="--collapsedHeight: 7.5rem;">  <div class="flex gap-2 flex-wrap"> <a href="/archive/?tag=DNS" aria-label="View all posts with the DNS tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  DNS </a><a href="/archive/?tag=edgeone" aria-label="View all posts with the edgeone tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  edgeone </a><a href="/archive/?tag=EO" aria-label="View all posts with the EO tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  EO </a><a href="/archive/?tag=github" aria-label="View all posts with the github tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  github </a><a href="/archive/?tag=hosts" aria-label="View all posts with the hosts tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  hosts </a><a href="/archive/?tag=Music" aria-label="View all posts with the Music tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  Music </a><a href="/archive/?tag=%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90" aria-label="View all posts with the 域名解析 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  域名解析 </a><a href="/archive/?tag=%E7%BD%91%E6%98%93%E4%BA%91" aria-label="View all posts with the 网易云 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  网易云 </a><a href="/archive/?tag=%E9%87%8D%E5%AE%9A%E5%90%91" aria-label="View all posts with the 重定向 tag" class="btn-regular h-8 text-sm px-3 rounded-lg">  重定向 </a> </div>  </div>  </widget-layout>   </div> </div> <main id="swup-container" class="transition-swup-fade col-span-2 lg:col-span-1 overflow-hidden"> <div id="content-wrapper" class="onload-animation"> <!-- the overflow-hidden here prevent long text break the layout--> <!-- make id different from windows.swup global property -->  <div class="transition flex flex-col rounded-[var(--radius-large)] bg-[var(--card-bg)] py-1 md:py-0 md:bg-transparent md:gap-4 mb-4"> <div class="card-base flex flex-col-reverse md:flex-col w-full rounded-[var(--radius-large)] overflow-hidden relative onload-animation" style="animation-delay: calc(var(--content-delay) + 0ms);; --coverWidth: 28%;" data-astro-cid-iyiqi2so> <div class="pl-6 md:pl-9 pr-6 md:pr-2 pt-6 md:pt-7 pb-6 relative w-full md:w-[calc(100%_-_var(--coverWidth)_-_12px)]" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <a href="/posts/apex-to-www/" class="transition group w-full block font-bold mb-3 text-3xl text-90
        hover:text-[var(--primary)] dark:hover:text-[var(--primary)]
        active:text-[var(--title-active)] dark:active:text-[var(--title-active)]
        before:w-1 before:h-5 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:top-[35px] before:left-[18px] before:hidden md:before:block
        " data-astro-cid-iyiqi2so style="--coverWidth: 28%;">  Pages × CDN：跳转的另一边 <svg width="1em" height="1em" viewBox="0 0 24 24" class="inline text-[2rem] text-[var(--primary)] md:hidden translate-y-0.5 absolute" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[var(--primary)] text-[2rem] transition hidden md:inline absolute translate-y-0.5 opacity-0 group-hover:opacity-100 -translate-x-1 group-hover:translate-x-0" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </a> <!-- metadata --> <div class="flex flex-wrap text-neutral-500 dark:text-neutral-400 items-center gap-4 gap-x-4 gap-y-2 mb-4"> <!-- publish date --> <div class="flex items-center"> <div class="meta-icon"> <svg width="1em" height="1em" class="text-xl" data-icon="material-symbols:calendar-today-outline-rounded">   <symbol id="ai:material-symbols:calendar-today-outline-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V3q0-.425.288-.712T7 2t.713.288T8 3v1h8V3q0-.425.288-.712T17 2t.713.288T18 3v1h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5zM5 8h14V6H5zm0 0V6z"/></symbol><use href="#ai:material-symbols:calendar-today-outline-rounded"></use>  </svg> </div> <span class="text-50 text-sm font-medium">2025-09-26</span> </div> <!-- update date -->  <!-- tags --> <div class="items-center hidden md:flex"> <div class="meta-icon"> <svg width="1em" height="1em" class="text-xl" data-icon="material-symbols:tag-rounded">   <symbol id="ai:material-symbols:tag-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="m9 16l-.825 3.275q-.075.325-.325.525t-.6.2q-.475 0-.775-.375T6.3 18.8L7 16H4.275q-.5 0-.8-.387T3.3 14.75q.075-.35.35-.55t.625-.2H7.5l1-4H5.775q-.5 0-.8-.387T4.8 8.75q.075-.35.35-.55t.625-.2H9l.825-3.275Q9.9 4.4 10.15 4.2t.6-.2q.475 0 .775.375t.175.825L11 8h4l.825-3.275q.075-.325.325-.525t.6-.2q.475 0 .775.375t.175.825L17 8h2.725q.5 0 .8.387t.175.863q-.075.35-.35.55t-.625.2H16.5l-1 4h2.725q.5 0 .8.388t.175.862q-.075.35-.35.55t-.625.2H15l-.825 3.275q-.075.325-.325.525t-.6.2q-.475 0-.775-.375T12.3 18.8L13 16zm.5-2h4l1-4h-4z"/></symbol><use href="#ai:material-symbols:tag-rounded"></use>  </svg> </div> <div class="flex flex-row flex-nowrap items-center"> <div class="hidden mx-1.5 text-[var(--meta-divider)] text-sm">/</div>
                    <a href="/archive/tag/EO/" aria-label="View all posts with the EO tag" class="link-lg transition text-50 text-sm font-medium
                                hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> EO </a><div class="mx-1.5 text-[var(--meta-divider)] text-sm">/</div>
                    <a href="/archive/tag/域名解析/" aria-label="View all posts with the 域名解析 tag" class="link-lg transition text-50 text-sm font-medium
                                hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> 域名解析 </a><div class="mx-1.5 text-[var(--meta-divider)] text-sm">/</div>
                    <a href="/archive/tag/重定向/" aria-label="View all posts with the 重定向 tag" class="link-lg transition text-50 text-sm font-medium
                                hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> 重定向 </a>  </div> </div> <!-- page views -->  </div>  <!-- description --> <div class="transition text-75 mb-3.5 pr-4" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> Pages酱遇到CDN君就会报418，还不听话的Apex只好靠重定向魔法解决啦～ </div> <!-- word count, read time and page views --> <div class="text-sm text-black/30 dark:text-white/30 flex gap-4 transition" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">597 字</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">|</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">3 分钟</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">|</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <span class="text-50 text-sm font-medium" id="page-views-apex-to-www" data-astro-cid-iyiqi2so style="--coverWidth: 28%;">统计加载中...</span> </div> </div> </div> <a href="/posts/apex-to-www/" aria-label="Pages × CDN：跳转的另一边" class="group max-h-[20vh] md:max-h-none mx-4 mt-4 -mb-2 md:mb-0 md:mx-0 md:mt-0 md:w-[var(--coverWidth)] relative md:absolute md:top-3 md:bottom-3 md:right-3 rounded-xl overflow-hidden active:scale-95" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <div class="absolute pointer-events-none z-10 w-full h-full group-hover:bg-black/30 group-active:bg-black/50 transition" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"></div> <!-- 封面图上的箭头 --> <div class="absolute pointer-events-none z-20 w-full h-full flex items-center justify-center " data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition opacity-0 group-hover:opacity-100 scale-50 group-hover:scale-100 text-white text-5xl" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </div> <div class="w-full h-full overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="https://s3.yumeyuka.plus/2025/1758870738265.webp" alt="Cover Image of the Post" class="w-full h-full object-cover" style="object-position: center"> </div> </a>  </div> <div class="transition border-t-[1px] border-dashed mx-6 border-black/10 dark:border-white/[0.15] last:border-t-0 md:hidden" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"></div> <script>(function(){const entry = {"id":"apex-to-www.md","data":{"title":"Pages × CDN：跳转的另一边","published":"2025-09-26T00:00:00.000Z","draft":false,"description":"Pages酱遇到CDN君就会报418，还不听话的Apex只好靠重定向魔法解决啦～","image":"https://s3.yumeyuka.plus/2025/1758870738265.webp","tags":["EO","域名解析","重定向"],"category":"知识","lang":"","prevTitle":"从 EdgeOne 开始的奇妙旅程——加速你的 GitHub 图床","prevSlug":"edgeone-gh","nextTitle":"","nextSlug":""},"body":"## 前情提要\n\n> [!TIP]\n>\n> **https://www.yumeyuka.plus/posts/edgeone-gh/**\n\n## 结论：\n\n- 如果 Pages 直接解析到 CDN 节点，会返回一个 `418`\n- 如果要 Pages 再套一层 CDN 节点则不能直接 CNAME 到分配的解析记录，需要绑定一个中转的子域名， 然后由需要加速的域名的源站填写中转的域名，否则同上返回 `418`\n- Apex 不适用上面方法，即不能通过子域中转，且与自定义 `NS` `DNSSEC`  冲突，同上返回 `418`\n- Pages 不能进行优选，且无意义，无论国际站还是国内站，如果部署区域为非大陆，非大陆网络可正常访问，大陆网络返回 `401`\n- 非大陆站点，即境外站点，例如 `GitHub Pages Vercel Netlify Cloudflare Pgaes / Work` 等，使用 CDN 加速无意义\n- 重复第三条，当 Apex 和 www 子域及其它变体绑定到同一  Pages 时，无法通过 `edgeone.json` 进行重定向，此处需要满足同时使用第二条，否则无限重定向\n\n## 那么如何解决 Apex 重定向到 www 子域呢\n方法有很多，这里我通过使用分2个 Pages 项目部署，将 Apex 绑定到新的 Pages 项目，新建 `index.html`  `edgeone.json` 进行重定向，需要在 index.html中填入和需要重定向内容相同的 `head` 内容，例如 og 这种\n\n\n```html title=\"index.html\" collapse={11-43} ins={\"1\":8-9} ins={\"2\":45-48}\n<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>梦璃酱 - YumeYuka Blog of Dreams</title>\n    \n    <!-- 重定向 -->\n    <meta http-equiv=\"refresh\" content=\"0; url=https://www.yumeyuka.plus/\">\n    \n    <!-- 规范链接 -->\n    <link rel=\"canonical\" href=\"https://www.yumeyuka.plus/\">\n    \n    <!-- 基本SEO标签 -->\n    <meta name=\"description\" content=\"梦璃酱 - YumeYuka Blog of Dreams\">\n    <meta name=\"author\" content=\"梦璃酱 - YumeYuka\">\n    <meta name=\"robots\" content=\"noindex, nofollow\">\n    \n    <!-- Open Graph 标签 -->\n    <meta property=\"og:site_name\" content=\"梦璃酱\">\n    <meta property=\"og:locale\" content=\"zh_CN\">\n    <meta property=\"og:url\" content=\"https://www.yumeyuka.plus/\">\n    <meta property=\"og:title\" content=\"一つの心臓の両面に傷を負う\">\n    <meta property=\"og:image\" content=\"https://s3.yumeyuka.plus/2025/23-22-30.webp\">\n    <meta property=\"og:image:secure_url\" content=\"https://s3.yumeyuka.plus/2025/23-22-30.webp\">\n    \n    <meta property=\"og:image:width\" content=\"1200\">\n    <meta property=\"og:image:height\" content=\"630\">\n    <meta property=\"og:image:type\" content=\"image/webp\">\n    <meta property=\"og:type\" content=\"website\">\n    \n    <!-- Twitter 卡片标签 -->\n    <meta name=\"twitter:card\" content=\"summary_large_image\">\n    <meta name=\"twitter:site\" content=\"梦璃酱\">\n    <meta property=\"twitter:url\" content=\"https://www.yumeyuka.plus/\">\n    <meta name=\"twitter:title\" content=\"一つの心臓の両面に傷を負う\">\n    <meta name=\"twitter:image\" content=\"https://s3.yumeyuka.plus/2025/23-22-30.webp\">\n    \n    <!-- Telegram 专用标签 -->\n    <meta property=\"telegram:channel\" content=\"@yumeyuka\">\n    \n    <!-- 图标 -->\n    <link rel=\"icon\" href=\"https://s3.yumeyuka.plus/2025/Image_1758222788424.webp\" type=\"image/webp\">\n    \n    <!-- JavaScript重定向（备用方案） -->\n    <script>\n        window.location.replace(\"https://www.yumeyuka.plus/\");\n    \x3C/script>\n</head>\n<body></body>\n</html>\n```\n```json title = \"edgeone.json\"\n{\n    \"redirects\": [\n      {\n        \"source\": \"$host\",\n        \"destination\": \"$wwwhost\",\n        \"statusCode\": 301\n      }\n    ]\n}\n```\n\n## 如何解析\n将以上代码 部署到 Pages 新的项目，将apex 域，或者你想重定向的域解析到这个。\n将源站项目添加子域中转，CDN 加速页选择回源策略使用源站，虽然是有点沙雕，但是没办法的权宜之计  \n\n![image-20250926163605280](https://s3.yumeyuka.plus/2025/09/caff028c6ffdf2f8739643e99854333e.webp)\n\n![image-20250926163620315](https://s3.yumeyuka.plus/2025/09/8f8889b95224d1163028a49f25455a73.webp)\n\n![image-20250926163644689](https://s3.yumeyuka.plus/2025/09/7d07df27da68d39948e7b374369afc65.webp)","filePath":"src/content/posts/apex-to-www.md","digest":"f2ecc2bc734e3c14","rendered":{"html":"<section><h2 id=\"前情提要\">前情提要<a class=\"anchor\" href=\"#前情提要\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><blockquote class=\"admonition bdm-tip\"><span class=\"bdm-title\">TIP</span><p><strong><a href=\"https://www.yumeyuka.plus/posts/edgeone-gh/\">https://www.yumeyuka.plus/posts/edgeone-gh/</a></strong></p></blockquote></section>\n<section><h2 id=\"结论\">结论：<a class=\"anchor\" href=\"#结论\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><ul>\n<li>如果 Pages 直接解析到 CDN 节点，会返回一个 <code>418</code></li>\n<li>如果要 Pages 再套一层 CDN 节点则不能直接 CNAME 到分配的解析记录，需要绑定一个中转的子域名， 然后由需要加速的域名的源站填写中转的域名，否则同上返回 <code>418</code></li>\n<li>Apex 不适用上面方法，即不能通过子域中转，且与自定义 <code>NS</code> <code>DNSSEC</code>  冲突，同上返回 <code>418</code></li>\n<li>Pages 不能进行优选，且无意义，无论国际站还是国内站，如果部署区域为非大陆，非大陆网络可正常访问，大陆网络返回 <code>401</code></li>\n<li>非大陆站点，即境外站点，例如 <code>GitHub Pages Vercel Netlify Cloudflare Pgaes / Work</code> 等，使用 CDN 加速无意义</li>\n<li>重复第三条，当 Apex 和 www 子域及其它变体绑定到同一  Pages 时，无法通过 <code>edgeone.json</code> 进行重定向，此处需要满足同时使用第二条，否则无限重定向</li>\n</ul></section>\n<section><h2 id=\"那么如何解决-apex-重定向到-www-子域呢\">那么如何解决 Apex 重定向到 www 子域呢<a class=\"anchor\" href=\"#那么如何解决-apex-重定向到-www-子域呢\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>方法有很多，这里我通过使用分2个 Pages 项目部署，将 Apex 绑定到新的 Pages 项目，新建 <code>index.html</code>  <code>edgeone.json</code> 进行重定向，需要在 index.html中填入和需要重定向内容相同的 <code>head</code> 内容，例如 og 这种</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.4fsv9.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame has-title\"><figcaption class=\"header\"><span class=\"title\">index.html</span></figcaption><pre data-language=\"html\" class=\"wrap\" style=\"--ecMaxLine:101ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;!</span><span style=\"--0:#85E89D;--1:#85E89D\">DOCTYPE</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">html</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">html</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">lang</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"zh-CN\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">head</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">charset</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"UTF-8\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">name</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"viewport\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"width=device-width, initial-scale=1.0\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">title</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">>梦璃酱 - YumeYuka Blog of Dreams&#x3C;/</span><span style=\"--0:#85E89D;--1:#85E89D\">title</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line highlight ins tm-label\" style=\"--tmLabel:&#x27;1&#x27;;--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#b1b7bb;--1:#b1b7bb\">&#x3C;!-- 重定向 --></span></div></div><div class=\"ec-line highlight ins\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#c3a9f3;--1:#c3a9f3\">http-equiv</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"refresh\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#c3a9f3;--1:#c3a9f3\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"0; url=https://www.yumeyuka.plus/\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><details class=\"ec-section github\"><summary><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\"></div></div><div class=\"code\"><span class=\"expand\"></span><span class=\"collapse\"></span><span class=\"text\">33 collapsed lines</span></div></div></summary><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#99A0A6;--1:#99A0A6\">&#x3C;!-- 规范链接 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">link</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">rel</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"canonical\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">href</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"https://www.yumeyuka.plus/\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#99A0A6;--1:#99A0A6\">&#x3C;!-- 基本SEO标签 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">name</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"description\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"梦璃酱 - YumeYuka Blog of Dreams\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">name</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"author\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"梦璃酱 - YumeYuka\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">name</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"robots\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"noindex, nofollow\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#99A0A6;--1:#99A0A6\">&#x3C;!-- Open Graph 标签 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">property</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"og:site_name\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"梦璃酱\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">property</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"og:locale\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"zh_CN\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">property</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"og:url\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"https://www.yumeyuka.plus/\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">property</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"og:title\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"一つの心臓の両面に傷を負う\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">property</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"og:image\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"https://s3.yumeyuka.plus/2025/23-22-30.webp\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">property</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"og:image:secure_url\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"https://s3.yumeyuka.plus/2025/23-22-30.webp\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">property</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"og:image:width\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"1200\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">property</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"og:image:height\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"630\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">property</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"og:image:type\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"image/webp\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">property</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"og:type\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"website\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#99A0A6;--1:#99A0A6\">&#x3C;!-- Twitter 卡片标签 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">name</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"twitter:card\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"summary_large_image\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">name</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"twitter:site\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"梦璃酱\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">property</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"twitter:url\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"https://www.yumeyuka.plus/\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">name</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"twitter:title\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"一つの心臓の両面に傷を負う\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">name</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"twitter:image\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"https://s3.yumeyuka.plus/2025/23-22-30.webp\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">38</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">39</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#99A0A6;--1:#99A0A6\">&#x3C;!-- Telegram 专用标签 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">40</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">meta</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">property</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"telegram:channel\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">content</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"@yumeyuka\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">41</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">42</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#99A0A6;--1:#99A0A6\">&#x3C;!-- 图标 --></span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">43</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">link</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">rel</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"icon\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">href</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"https://s3.yumeyuka.plus/2025/Image_1758222788424.webp\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">type</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">=</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"image/webp\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div></details><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">44</div></div><div class=\"code\">\n</div></div><div class=\"ec-line highlight ins tm-label\" style=\"--tmLabel:&#x27;2&#x27;;--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">45</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#b1b7bb;--1:#b1b7bb\">&#x3C;!-- JavaScript重定向（备用方案） --></span></div></div><div class=\"ec-line highlight ins\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">46</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">script</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line highlight ins\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">47</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">        </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">window.location.</span><span style=\"--0:#c3a9f3;--1:#c3a9f3\">replace</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"https://www.yumeyuka.plus/\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">);</span></div></div><div class=\"ec-line highlight ins\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">48</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#85E89D;--1:#85E89D\">script</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">49</div></div><div class=\"code\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#85E89D;--1:#85E89D\">head</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">50</div></div><div class=\"code\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;</span><span style=\"--0:#85E89D;--1:#85E89D\">body</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">>&#x3C;/</span><span style=\"--0:#85E89D;--1:#85E89D\">body</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">51</div></div><div class=\"code\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">&#x3C;/</span><span style=\"--0:#85E89D;--1:#85E89D\">html</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">></span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><div class=\"expressive-code\"><figure class=\"frame has-title\"><figcaption class=\"header\"><span class=\"title\">edgeone.json</span></figcaption><pre data-language=\"json\" class=\"wrap\" style=\"--ecMaxLine:34ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">\"redirects\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">: [</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">      </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">{</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#79B8FF;--1:#79B8FF\">\"source\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">: </span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"$host\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#79B8FF;--1:#79B8FF\">\"destination\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">: </span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"$wwwhost\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">,</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#79B8FF;--1:#79B8FF\">\"statusCode\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">: </span><span style=\"--0:#79B8FF;--1:#79B8FF\">301</span></div></div><div class=\"ec-line\" style=\"--ecIndent:6ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">      </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">}</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">}</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"如何解析\">如何解析<a class=\"anchor\" href=\"#如何解析\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>将以上代码 部署到 Pages 新的项目，将apex 域，或者你想重定向的域解析到这个。\n将源站项目添加子域中转，CDN 加速页选择回源策略使用源站，虽然是有点沙雕，但是没办法的权宜之计</p><p><img src=\"https://s3.yumeyuka.plus/2025/09/caff028c6ffdf2f8739643e99854333e.webp\" alt=\"image-20250926163605280\"></p><p><img src=\"https://s3.yumeyuka.plus/2025/09/8f8889b95224d1163028a49f25455a73.webp\" alt=\"image-20250926163620315\"></p><p><img src=\"https://s3.yumeyuka.plus/2025/09/7d07df27da68d39948e7b374369afc65.webp\" alt=\"image-20250926163644689\"></p></section>","metadata":{"headings":[{"depth":2,"slug":"前情提要","text":"前情提要#"},{"depth":2,"slug":"结论","text":"结论：#"},{"depth":2,"slug":"那么如何解决-apex-重定向到-www-子域呢","text":"那么如何解决 Apex 重定向到 www 子域呢#"},{"depth":2,"slug":"如何解析","text":"如何解析#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"Pages × CDN：跳转的另一边","published":"2025-09-26T00:00:00.000Z","description":"Pages酱遇到CDN君就会报418，还不听话的Apex只好靠重定向魔法解决啦～","image":"https://s3.yumeyuka.plus/2025/1758870738265.webp","tags":["EO","域名解析","重定向"],"category":"知识","draft":false,"minutes":3,"words":597,"excerpt":"方法有很多，这里我通过使用分2个 Pages 项目部署，将 Apex 绑定到新的 Pages 项目，新建 index.html  edgeone.json 进行重定向，需要在 index.html中填入和需要重定向内容相同的 head 内容，例如 og 这种"},"imagePaths":[]}},"collection":"posts","slug":"apex-to-www"};
const umamiConfig = {"enable":true,"baseUrl":"https://eu.umami.is","shareId":"QA4C7dikiZNVwva3","timezone":"Asia/Shanghai"};
const unavailableText = "统计不可用。请检查是否屏蔽了Umami域名，如AdGuard和AdBlock等插件";
const viewsText = "浏览";
const visitsText = "访客";

    // 客户端统计文案生成函数
    function generateStatsText(pageViews, visits) {
        return `${viewsText} ${pageViews} · ${visitsText} ${visits}`;
    }

    // 获取文章浏览量统计
    async function fetchPostCardViews(slug) {
        if (!umamiConfig.enable) {
            return;
        }

        try {
            // 调用全局工具获取 Umami 分享数据
            const { websiteId, token } = await getUmamiShareData(umamiConfig.baseUrl, umamiConfig.shareId);

            // 第二步：获取统计数据
            const currentTimestamp = Date.now();
            const statsUrl = `${umamiConfig.baseUrl}/api/websites/${websiteId}/stats?startAt=0&endAt=${currentTimestamp}&unit=hour&timezone=${encodeURIComponent(umamiConfig.timezone)}&url=%2Fposts%2F${slug}%2F&compare=false`;

            const statsResponse = await fetch(statsUrl, {
                headers: {
                    'x-umami-share-token': token
                }
            });

            if (statsResponse.status === 401) {
                clearUmamiShareCache();
                return await fetchPostCardViews(slug);
            }

            if (!statsResponse.ok) {
                throw new Error('获取统计数据失败');
            }

            const statsData = await statsResponse.json();
            const pageViews = statsData.pageviews?.value || 0;
            const visits = statsData.visits?.value || 0;

            const displayElement = document.getElementById(`page-views-${slug}`);
            if (displayElement) {
                displayElement.textContent = generateStatsText(pageViews, visits);
            }
        } catch (error) {
            console.error('Error fetching page views for', slug, ':', error);
            const displayElement = document.getElementById(`page-views-${slug}`);
            if (displayElement) {
                displayElement.textContent = unavailableText;
            }
        }
    }

    // 页面加载完成后获取统计数据
    function initPostCardStats() {
        const slug = entry.slug;
        if (slug) {
            fetchPostCardViews(slug);
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPostCardStats);
    } else {
        initPostCardStats();
    }
})();</script> <div class="card-base flex flex-col-reverse md:flex-col w-full rounded-[var(--radius-large)] overflow-hidden relative onload-animation" style="animation-delay: calc(var(--content-delay) + 50ms);; --coverWidth: 28%;" data-astro-cid-iyiqi2so> <div class="pl-6 md:pl-9 pr-6 md:pr-2 pt-6 md:pt-7 pb-6 relative w-full md:w-[calc(100%_-_var(--coverWidth)_-_12px)]" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <a href="/posts/edgeone-gh/" class="transition group w-full block font-bold mb-3 text-3xl text-90
        hover:text-[var(--primary)] dark:hover:text-[var(--primary)]
        active:text-[var(--title-active)] dark:active:text-[var(--title-active)]
        before:w-1 before:h-5 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:top-[35px] before:left-[18px] before:hidden md:before:block
        " data-astro-cid-iyiqi2so style="--coverWidth: 28%;">  从 EdgeOne 开始的奇妙旅程——加速你的 GitHub 图床 <svg width="1em" height="1em" viewBox="0 0 24 24" class="inline text-[2rem] text-[var(--primary)] md:hidden translate-y-0.5 absolute" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[var(--primary)] text-[2rem] transition hidden md:inline absolute translate-y-0.5 opacity-0 group-hover:opacity-100 -translate-x-1 group-hover:translate-x-0" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </a> <!-- metadata --> <div class="flex flex-wrap text-neutral-500 dark:text-neutral-400 items-center gap-4 gap-x-4 gap-y-2 mb-4"> <!-- publish date --> <div class="flex items-center"> <div class="meta-icon"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-xl" data-icon="material-symbols:calendar-today-outline-rounded">   <use href="#ai:material-symbols:calendar-today-outline-rounded"></use>  </svg> </div> <span class="text-50 text-sm font-medium">2025-09-23</span> </div> <!-- update date -->  <!-- tags --> <div class="items-center hidden md:flex"> <div class="meta-icon"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-xl" data-icon="material-symbols:tag-rounded">   <use href="#ai:material-symbols:tag-rounded"></use>  </svg> </div> <div class="flex flex-row flex-nowrap items-center"> <div class="hidden mx-1.5 text-[var(--meta-divider)] text-sm">/</div>
                    <a href="/archive/tag/edgeone/" aria-label="View all posts with the edgeone tag" class="link-lg transition text-50 text-sm font-medium
                                hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> edgeone </a><div class="mx-1.5 text-[var(--meta-divider)] text-sm">/</div>
                    <a href="/archive/tag/github/" aria-label="View all posts with the github tag" class="link-lg transition text-50 text-sm font-medium
                                hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> github </a>  </div> </div> <!-- page views -->  </div>  <!-- description --> <div class="transition text-75 mb-3.5 pr-4" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> 带你揭秘图床加速的神奇世界，了解怎么用 Cloudflare 和 EdgeOne 魔法，让你的图片飞起来！✨ </div> <!-- word count, read time and page views --> <div class="text-sm text-black/30 dark:text-white/30 flex gap-4 transition" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">1001 字</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">|</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">5 分钟</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">|</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <span class="text-50 text-sm font-medium" id="page-views-edgeone-gh" data-astro-cid-iyiqi2so style="--coverWidth: 28%;">统计加载中...</span> </div> </div> </div> <a href="/posts/edgeone-gh/" aria-label="从 EdgeOne 开始的奇妙旅程——加速你的 GitHub 图床" class="group max-h-[20vh] md:max-h-none mx-4 mt-4 -mb-2 md:mb-0 md:mx-0 md:mt-0 md:w-[var(--coverWidth)] relative md:absolute md:top-3 md:bottom-3 md:right-3 rounded-xl overflow-hidden active:scale-95" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <div class="absolute pointer-events-none z-10 w-full h-full group-hover:bg-black/30 group-active:bg-black/50 transition" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"></div> <!-- 封面图上的箭头 --> <div class="absolute pointer-events-none z-20 w-full h-full flex items-center justify-center " data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition opacity-0 group-hover:opacity-100 scale-50 group-hover:scale-100 text-white text-5xl" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </div> <div class="w-full h-full overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="https://s3.yumeyuka.plus/2025/23-20-43.webp" alt="Cover Image of the Post" class="w-full h-full object-cover" style="object-position: center"> </div> </a>  </div> <div class="transition border-t-[1px] border-dashed mx-6 border-black/10 dark:border-white/[0.15] last:border-t-0 md:hidden" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"></div> <script>(function(){const entry = {"id":"edgeone-gh.md","data":{"title":"从 EdgeOne 开始的奇妙旅程——加速你的 GitHub 图床","published":"2025-09-23T00:00:00.000Z","draft":false,"description":"带你揭秘图床加速的神奇世界，了解怎么用 Cloudflare 和 EdgeOne 魔法，让你的图片飞起来！✨","image":"https://s3.yumeyuka.plus/2025/23-20-43.webp","tags":["edgeone","github"],"category":"知识","lang":"","prevTitle":"网易云·静寂小魔法","prevSlug":"cloudpress","nextTitle":"Pages × CDN：跳转的另一边","nextSlug":"apex-to-www"},"body":"## 前言\n\n刚写完这个才发现有问题，如果 EO 是 NS 接入的话，可能会有问题， EO Pages 不能直接 CNAME 到 CDN  的节点，会直接 418 返回. EO 的 NS 接入坑还是有点多的，但是如果是域名在 CF 直接 cname 到 EO  还是会有问题，首先就是 CF 会默认给展平 APEX 域，这样 EO 那边就 永远不会到 CNAME 到，算是一个比较麻烦的问题，当然可以重定向解决这个问题，如果是 使用　CF Work 的话就需要域名解析商在 CF。\n\n\n > [!WARNING]  \n >\n > 此文章现在已经失效了，如果非要做图床可以考虑使用EO Pages 然后 直接 A 记录到 IP，国内 CDN 无法加速境外的站点，官方是这样说的 https://cloud.tencent.com/developer/tutorial/practice/1017  \n >\n > \n >\n > 也就是说这些已经不适用了，如果是直接优选香港节点的话 会直接得到解析失败，在反复折腾了 3填之后还是放弃了，目前已经不适用了，硬要优选还不如 cf   \n >\n > \n >\n > ![image-20250926001633263](https://s3.yumeyuka.plus/2025/09/814336ab2ef7f351a79f95de8d24cf69.webp)\n >\n > \n >\n > ![image-20250926001242062](https://s3.yumeyuka.plus/2025/09/5ebcb53f599a261df4152b074f1aae29.webp)\n >\n\n\n\n## 使用项目\n\n实现开始之前，需要准备一个域名，备案最好，不备案建议使用cf 优选，不要用eo 了\n\n::github{repo=\"cmliu/CF-Workers-Raw\"}\n\n这个项目一开始是在 `Cloudflare Work` 部署的后来 `Edgeone pages` 出来之后，有人开了个 issue 就支持了\n\n- https://github.com/cmliu/CF-Workers-Raw/issues/9\n\n![23-21-40.webp](https://s3.yumeyuka.plus/2025/23-21-40.webp)\n\n## 延迟数据\n\n![23-21-48.webp](https://s3.yumeyuka.plus/2025/23-21-48.webp)\n\nEO Pages 和 cdn 节点不一样，pages 最多给分配30个节点，由于直接这样用国内的cdn节点直接去代理 GitHub 文件肯定是不行的\n\n平时绝大多数地方直接访问大概率也是被墙的 `GFW` 发力了，想要做代理，那就需要去用到 EO 给分配的香港节点，\n\n> [!TIP]\n>\n> EO 刚出来的时候确实是白月光，即使没备案直接 优选 香港节点，延迟优化很错，差不多相当于是全绿了\n>\n> 但是后面 8 月 初就开始砍了，现在优选 香港节点的话大概率会直接得到 `418` 状态码，这样开来还不让直接优选 cf\n\n首先把这项目自己 Fork 一份 ，用 CF 代理也行 用 EO pages 也行,没备案建议使用 cf work 优选,\n\n::github{repo=\"cmliu/CF-Workers-Raw\"}\n\n然后再 cf work 或者 eo pages 直接直接链接账户 导入 `Edgeone` 分支, cf 是默认的 `mian` 分支 ,部署之后需要绑定\n自定义的域名访问，，然后有以下3种方案\n\n| cf work + eo cdn | 体验最好 |\n|:----------------:|:----:|\n| cf work +　cf 优选  |  推荐  |\n| eo pages +　eo 优选 |  推荐  |\n\n以第一种为例，运行work 部署运行之后然后需要在 work 绑定自定义域名，然后在 EO 的站点添加 cdn 配置，然后解析 cname ,\n\n> [!TIP]\n>\n> 如果 eo 是NS 接入的话就需要2个域名，一个在 cf work 一个用于 eo cdn 分发\n\n![23-22-10.webp](https://s3.yumeyuka.plus/2025/23-22-10.webp)\n\n在 SSL 证书申请选择： 建议使用 腾讯云 申请 SSL 的证书，至于为什么因为后面优选 IP 需要用到 ，优选 IP 原有的 cname 记录会失效，然后\nA 记录直接解析到优选 IP ，如果选择申请免费的证书，cname 失效之后会导致 续签失败，建议直接使用 腾讯云申请的 SSL 证书，选择\nDNS验证然后不用删记录，直接等它自己续费就好了\n\n![23-22-16.webp](https://s3.yumeyuka.plus/2025/23-22-16.webp)\n\n然后优选 IP ，直接优选 香港 IP ，具体 IP段去看其他文档或者其他人写的 blog，如果你是CF 部署这里才用到下面的 IP ，否则如果是 将 EO CDN 的节点解析到 Pages 会直接返回 `418` 报错 \n\n```apl\n    43.174.150.199\n    43.174.150.119\n    43.174.151.16\n    43.174.151.120\n    43.174.151.58\n    43.174.150.6\n    43.174.150.123\n    43.174.151.214\n    43.174.151.241\n    43.174.151.165\n    43.174.150.111\n    43.174.151.2\n    43.174.151.243\n    43.174.150.132\n```\n\n## Github 配置\n\n在 `setting` 生成一个 token 然后 使用 `piclist picgo` 等其他的图床工具，配合 `Typora` 写，确实很不错的\n\n注意 自定义域名部分, 拼接部分需要注意，相对于使用 eo pages 然后去链接 `GitHub` 储存库然后每次上传都要 build 好很多\n\n```\nhttps://github.yumeyuka.plus/Keira-Yuki/picture/refs/heads/Yume/\n```\n\n![23-22-27.webp](https://s3.yumeyuka.plus/2025/23-22-27.webp)\n\n### 图片示例\n\n- https://s3.yumeyuka.plus/2025/23-22-30.webp\n\n![23-22-30.webp](https://s3.yumeyuka.plus/2025/23-22-30.webp)","filePath":"src/content/posts/edgeone-gh.md","digest":"e4813e593c0a0654","rendered":{"html":"<section><h2 id=\"前言\">前言<a class=\"anchor\" href=\"#前言\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>刚写完这个才发现有问题，如果 EO 是 NS 接入的话，可能会有问题， EO Pages 不能直接 CNAME 到 CDN  的节点，会直接 418 返回. EO 的 NS 接入坑还是有点多的，但是如果是域名在 CF 直接 cname 到 EO  还是会有问题，首先就是 CF 会默认给展平 APEX 域，这样 EO 那边就 永远不会到 CNAME 到，算是一个比较麻烦的问题，当然可以重定向解决这个问题，如果是 使用　CF Work 的话就需要域名解析商在 CF。</p><blockquote class=\"admonition bdm-warning\"><span class=\"bdm-title\">WARNING</span><p>此文章现在已经失效了，如果非要做图床可以考虑使用EO Pages 然后 直接 A 记录到 IP，国内 CDN 无法加速境外的站点，官方是这样说的 <a href=\"https://cloud.tencent.com/developer/tutorial/practice/1017\">https://cloud.tencent.com/developer/tutorial/practice/1017</a></p><p>也就是说这些已经不适用了，如果是直接优选香港节点的话 会直接得到解析失败，在反复折腾了 3填之后还是放弃了，目前已经不适用了，硬要优选还不如 cf</p><p><img src=\"https://s3.yumeyuka.plus/2025/09/814336ab2ef7f351a79f95de8d24cf69.webp\" alt=\"image-20250926001633263\"></p><p><img src=\"https://s3.yumeyuka.plus/2025/09/5ebcb53f599a261df4152b074f1aae29.webp\" alt=\"image-20250926001242062\"></p></blockquote></section>\n<section><h2 id=\"使用项目\">使用项目<a class=\"anchor\" href=\"#使用项目\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>实现开始之前，需要准备一个域名，备案最好，不备案建议使用cf 优选，不要用eo 了</p><a id=\"GCqrmfyh-card\" class=\"card-github fetch-waiting no-styling\" href=\"https://github.com/cmliu/CF-Workers-Raw\" target=\"_blank\" repo=\"cmliu/CF-Workers-Raw\"><div class=\"gc-titlebar\"><div class=\"gc-titlebar-left\"><div class=\"gc-owner\"><div id=\"GCqrmfyh-avatar\" class=\"gc-avatar\"></div><div class=\"gc-user\">cmliu</div></div><div class=\"gc-divider\">/</div><div class=\"gc-repo\">CF-Workers-Raw</div></div><div class=\"github-logo\"></div></div><div id=\"GCqrmfyh-description\" class=\"gc-description\">Waiting for api.github.com...</div><div class=\"gc-infobar\"><div id=\"GCqrmfyh-stars\" class=\"gc-stars\">00K</div><div id=\"GCqrmfyh-forks\" class=\"gc-forks\">0K</div><div id=\"GCqrmfyh-license\" class=\"gc-license\">0K</div><span id=\"GCqrmfyh-language\" class=\"gc-language\">Waiting...</span></div><script id=\"GCqrmfyh-script\" type=\"text/javascript\" defer>\n      fetch('https://api.github.com/repos/cmliu/CF-Workers-Raw', { referrerPolicy: \"no-referrer\" }).then(response => response.json()).then(data => {\n        document.getElementById('GCqrmfyh-description').innerText = data.description?.replace(/:[a-zA-Z0-9_]+:/g, '') || \"Description not set\";\n        document.getElementById('GCqrmfyh-language').innerText = data.language;\n        document.getElementById('GCqrmfyh-forks').innerText = Intl.NumberFormat('en-us', { notation: \"compact\", maximumFractionDigits: 1 }).format(data.forks).replaceAll(\" \", '');\n        document.getElementById('GCqrmfyh-stars').innerText = Intl.NumberFormat('en-us', { notation: \"compact\", maximumFractionDigits: 1 }).format(data.stargazers_count).replaceAll(\" \", '');\n        const avatarEl = document.getElementById('GCqrmfyh-avatar');\n        avatarEl.style.backgroundImage = 'url(' + data.owner.avatar_url + ')';\n        avatarEl.style.backgroundColor = 'transparent';\n        document.getElementById('GCqrmfyh-license').innerText = data.license?.spdx_id || \"no-license\";\n        document.getElementById('GCqrmfyh-card').classList.remove(\"fetch-waiting\");\n        console.log(\"[GITHUB-CARD] Loaded card for cmliu/CF-Workers-Raw | GCqrmfyh.\")\n      }).catch(err => {\n        const c = document.getElementById('GCqrmfyh-card');\n        c?.classList.add(\"fetch-error\");\n        console.warn(\"[GITHUB-CARD] (Error) Loading card for cmliu/CF-Workers-Raw | GCqrmfyh.\")\n      })\n    \x3C/script></a><p>这个项目一开始是在 <code>Cloudflare Work</code> 部署的后来 <code>Edgeone pages</code> 出来之后，有人开了个 issue 就支持了</p><ul>\n<li><a href=\"https://github.com/cmliu/CF-Workers-Raw/issues/9\">https://github.com/cmliu/CF-Workers-Raw/issues/9</a></li>\n</ul><p><img src=\"https://s3.yumeyuka.plus/2025/23-21-40.webp\" alt=\"23-21-40.webp\"></p></section>\n<section><h2 id=\"延迟数据\">延迟数据<a class=\"anchor\" href=\"#延迟数据\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p><img src=\"https://s3.yumeyuka.plus/2025/23-21-48.webp\" alt=\"23-21-48.webp\"></p><p>EO Pages 和 cdn 节点不一样，pages 最多给分配30个节点，由于直接这样用国内的cdn节点直接去代理 GitHub 文件肯定是不行的</p><p>平时绝大多数地方直接访问大概率也是被墙的 <code>GFW</code> 发力了，想要做代理，那就需要去用到 EO 给分配的香港节点，</p><blockquote class=\"admonition bdm-tip\"><span class=\"bdm-title\">TIP</span><p>EO 刚出来的时候确实是白月光，即使没备案直接 优选 香港节点，延迟优化很错，差不多相当于是全绿了</p><p>但是后面 8 月 初就开始砍了，现在优选 香港节点的话大概率会直接得到 <code>418</code> 状态码，这样开来还不让直接优选 cf</p></blockquote><p>首先把这项目自己 Fork 一份 ，用 CF 代理也行 用 EO pages 也行,没备案建议使用 cf work 优选,</p><a id=\"GCplh6r8-card\" class=\"card-github fetch-waiting no-styling\" href=\"https://github.com/cmliu/CF-Workers-Raw\" target=\"_blank\" repo=\"cmliu/CF-Workers-Raw\"><div class=\"gc-titlebar\"><div class=\"gc-titlebar-left\"><div class=\"gc-owner\"><div id=\"GCplh6r8-avatar\" class=\"gc-avatar\"></div><div class=\"gc-user\">cmliu</div></div><div class=\"gc-divider\">/</div><div class=\"gc-repo\">CF-Workers-Raw</div></div><div class=\"github-logo\"></div></div><div id=\"GCplh6r8-description\" class=\"gc-description\">Waiting for api.github.com...</div><div class=\"gc-infobar\"><div id=\"GCplh6r8-stars\" class=\"gc-stars\">00K</div><div id=\"GCplh6r8-forks\" class=\"gc-forks\">0K</div><div id=\"GCplh6r8-license\" class=\"gc-license\">0K</div><span id=\"GCplh6r8-language\" class=\"gc-language\">Waiting...</span></div><script id=\"GCplh6r8-script\" type=\"text/javascript\" defer>\n      fetch('https://api.github.com/repos/cmliu/CF-Workers-Raw', { referrerPolicy: \"no-referrer\" }).then(response => response.json()).then(data => {\n        document.getElementById('GCplh6r8-description').innerText = data.description?.replace(/:[a-zA-Z0-9_]+:/g, '') || \"Description not set\";\n        document.getElementById('GCplh6r8-language').innerText = data.language;\n        document.getElementById('GCplh6r8-forks').innerText = Intl.NumberFormat('en-us', { notation: \"compact\", maximumFractionDigits: 1 }).format(data.forks).replaceAll(\" \", '');\n        document.getElementById('GCplh6r8-stars').innerText = Intl.NumberFormat('en-us', { notation: \"compact\", maximumFractionDigits: 1 }).format(data.stargazers_count).replaceAll(\" \", '');\n        const avatarEl = document.getElementById('GCplh6r8-avatar');\n        avatarEl.style.backgroundImage = 'url(' + data.owner.avatar_url + ')';\n        avatarEl.style.backgroundColor = 'transparent';\n        document.getElementById('GCplh6r8-license').innerText = data.license?.spdx_id || \"no-license\";\n        document.getElementById('GCplh6r8-card').classList.remove(\"fetch-waiting\");\n        console.log(\"[GITHUB-CARD] Loaded card for cmliu/CF-Workers-Raw | GCplh6r8.\")\n      }).catch(err => {\n        const c = document.getElementById('GCplh6r8-card');\n        c?.classList.add(\"fetch-error\");\n        console.warn(\"[GITHUB-CARD] (Error) Loading card for cmliu/CF-Workers-Raw | GCplh6r8.\")\n      })\n    \x3C/script></a><p>然后再 cf work 或者 eo pages 直接直接链接账户 导入 <code>Edgeone</code> 分支, cf 是默认的 <code>mian</code> 分支 ,部署之后需要绑定\n自定义的域名访问，，然后有以下3种方案</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"center\">cf work + eo cdn</th><th align=\"center\">体验最好</th></tr></thead><tbody><tr><td align=\"center\">cf work +　cf 优选</td><td align=\"center\">推荐</td></tr><tr><td align=\"center\">eo pages +　eo 优选</td><td align=\"center\">推荐</td></tr></tbody></table><p>以第一种为例，运行work 部署运行之后然后需要在 work 绑定自定义域名，然后在 EO 的站点添加 cdn 配置，然后解析 cname ,</p><blockquote class=\"admonition bdm-tip\"><span class=\"bdm-title\">TIP</span><p>如果 eo 是NS 接入的话就需要2个域名，一个在 cf work 一个用于 eo cdn 分发</p></blockquote><p><img src=\"https://s3.yumeyuka.plus/2025/23-22-10.webp\" alt=\"23-22-10.webp\"></p><p>在 SSL 证书申请选择： 建议使用 腾讯云 申请 SSL 的证书，至于为什么因为后面优选 IP 需要用到 ，优选 IP 原有的 cname 记录会失效，然后\nA 记录直接解析到优选 IP ，如果选择申请免费的证书，cname 失效之后会导致 续签失败，建议直接使用 腾讯云申请的 SSL 证书，选择\nDNS验证然后不用删记录，直接等它自己续费就好了</p><p><img src=\"https://s3.yumeyuka.plus/2025/23-22-16.webp\" alt=\"23-22-16.webp\"></p><p>然后优选 IP ，直接优选 香港 IP ，具体 IP段去看其他文档或者其他人写的 blog，如果你是CF 部署这里才用到下面的 IP ，否则如果是 将 EO CDN 的节点解析到 Pages 会直接返回 <code>418</code> 报错</p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.4fsv9.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"apl\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.150.199</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.150.119</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.151.16</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.151.120</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.151.58</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.150.6</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.150.123</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.151.214</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.151.241</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.151.165</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.150.111</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.151.2</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.151.243</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#79B8FF;--1:#79B8FF\">43.174.150.132</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"github-配置\">Github 配置<a class=\"anchor\" href=\"#github-配置\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>在 <code>setting</code> 生成一个 token 然后 使用 <code>piclist picgo</code> 等其他的图床工具，配合 <code>Typora</code> 写，确实很不错的</p><p>注意 自定义域名部分, 拼接部分需要注意，相对于使用 eo pages 然后去链接 <code>GitHub</code> 储存库然后每次上传都要 build 好很多</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:64ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#e1e4e8;--1:#e1e4e8\">https://github.yumeyuka.plus/Keira-Yuki/picture/refs/heads/Yume/</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p><img src=\"https://s3.yumeyuka.plus/2025/23-22-27.webp\" alt=\"23-22-27.webp\"></p><section><h3 id=\"图片示例\">图片示例<a class=\"anchor\" href=\"#图片示例\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><a href=\"https://s3.yumeyuka.plus/2025/23-22-30.webp\">https://s3.yumeyuka.plus/2025/23-22-30.webp</a></li>\n</ul><p><img src=\"https://s3.yumeyuka.plus/2025/23-22-30.webp\" alt=\"23-22-30.webp\"></p></section></section>","metadata":{"headings":[{"depth":2,"slug":"前言","text":"前言#"},{"depth":2,"slug":"使用项目","text":"使用项目#"},{"depth":2,"slug":"延迟数据","text":"延迟数据#"},{"depth":2,"slug":"github-配置","text":"Github 配置#"},{"depth":3,"slug":"图片示例","text":"图片示例#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"从 EdgeOne 开始的奇妙旅程——加速你的 GitHub 图床","published":"2025-09-23T00:00:00.000Z","description":"带你揭秘图床加速的神奇世界，了解怎么用 Cloudflare 和 EdgeOne 魔法，让你的图片飞起来！✨","image":"https://s3.yumeyuka.plus/2025/23-20-43.webp","tags":["edgeone","github"],"category":"知识","draft":false,"minutes":5,"words":1001,"excerpt":"刚写完这个才发现有问题，如果 EO 是 NS 接入的话，可能会有问题， EO Pages 不能直接 CNAME 到 CDN  的节点，会直接 418 返回. EO 的 NS 接入坑还是有点多的，但是如果是域名在 CF 直接 cname 到 EO  还是会有问题，首先就是 CF 会默认给展平 APEX 域，这样 EO 那边就 永远不会到 CNAME 到，算是一个比较麻烦的问题，当然可以重定向解决这个问题，如果是 使用　CF Work 的话就需要域名解析商在 CF。"},"imagePaths":[]}},"collection":"posts","slug":"edgeone-gh"};
const umamiConfig = {"enable":true,"baseUrl":"https://eu.umami.is","shareId":"QA4C7dikiZNVwva3","timezone":"Asia/Shanghai"};
const unavailableText = "统计不可用。请检查是否屏蔽了Umami域名，如AdGuard和AdBlock等插件";
const viewsText = "浏览";
const visitsText = "访客";

    // 客户端统计文案生成函数
    function generateStatsText(pageViews, visits) {
        return `${viewsText} ${pageViews} · ${visitsText} ${visits}`;
    }

    // 获取文章浏览量统计
    async function fetchPostCardViews(slug) {
        if (!umamiConfig.enable) {
            return;
        }

        try {
            // 调用全局工具获取 Umami 分享数据
            const { websiteId, token } = await getUmamiShareData(umamiConfig.baseUrl, umamiConfig.shareId);

            // 第二步：获取统计数据
            const currentTimestamp = Date.now();
            const statsUrl = `${umamiConfig.baseUrl}/api/websites/${websiteId}/stats?startAt=0&endAt=${currentTimestamp}&unit=hour&timezone=${encodeURIComponent(umamiConfig.timezone)}&url=%2Fposts%2F${slug}%2F&compare=false`;

            const statsResponse = await fetch(statsUrl, {
                headers: {
                    'x-umami-share-token': token
                }
            });

            if (statsResponse.status === 401) {
                clearUmamiShareCache();
                return await fetchPostCardViews(slug);
            }

            if (!statsResponse.ok) {
                throw new Error('获取统计数据失败');
            }

            const statsData = await statsResponse.json();
            const pageViews = statsData.pageviews?.value || 0;
            const visits = statsData.visits?.value || 0;

            const displayElement = document.getElementById(`page-views-${slug}`);
            if (displayElement) {
                displayElement.textContent = generateStatsText(pageViews, visits);
            }
        } catch (error) {
            console.error('Error fetching page views for', slug, ':', error);
            const displayElement = document.getElementById(`page-views-${slug}`);
            if (displayElement) {
                displayElement.textContent = unavailableText;
            }
        }
    }

    // 页面加载完成后获取统计数据
    function initPostCardStats() {
        const slug = entry.slug;
        if (slug) {
            fetchPostCardViews(slug);
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPostCardStats);
    } else {
        initPostCardStats();
    }
})();</script> <div class="card-base flex flex-col-reverse md:flex-col w-full rounded-[var(--radius-large)] overflow-hidden relative onload-animation" style="animation-delay: calc(var(--content-delay) + 100ms);; --coverWidth: 28%;" data-astro-cid-iyiqi2so> <div class="pl-6 md:pl-9 pr-6 md:pr-2 pt-6 md:pt-7 pb-6 relative w-full md:w-[calc(100%_-_var(--coverWidth)_-_12px)]" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <a href="/posts/cloudpress/" class="transition group w-full block font-bold mb-3 text-3xl text-90
        hover:text-[var(--primary)] dark:hover:text-[var(--primary)]
        active:text-[var(--title-active)] dark:active:text-[var(--title-active)]
        before:w-1 before:h-5 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:top-[35px] before:left-[18px] before:hidden md:before:block
        " data-astro-cid-iyiqi2so style="--coverWidth: 28%;">  网易云·静寂小魔法 <svg width="1em" height="1em" viewBox="0 0 24 24" class="inline text-[2rem] text-[var(--primary)] md:hidden translate-y-0.5 absolute" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[var(--primary)] text-[2rem] transition hidden md:inline absolute translate-y-0.5 opacity-0 group-hover:opacity-100 -translate-x-1 group-hover:translate-x-0" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </a> <!-- metadata --> <div class="flex flex-wrap text-neutral-500 dark:text-neutral-400 items-center gap-4 gap-x-4 gap-y-2 mb-4"> <!-- publish date --> <div class="flex items-center"> <div class="meta-icon"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-xl" data-icon="material-symbols:calendar-today-outline-rounded">   <use href="#ai:material-symbols:calendar-today-outline-rounded"></use>  </svg> </div> <span class="text-50 text-sm font-medium">2025-07-07</span> </div> <!-- update date -->  <!-- tags --> <div class="items-center hidden md:flex"> <div class="meta-icon"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-xl" data-icon="material-symbols:tag-rounded">   <use href="#ai:material-symbols:tag-rounded"></use>  </svg> </div> <div class="flex flex-row flex-nowrap items-center"> <div class="hidden mx-1.5 text-[var(--meta-divider)] text-sm">/</div>
                    <a href="/archive/tag/网易云/" aria-label="View all posts with the 网易云 tag" class="link-lg transition text-50 text-sm font-medium
                                hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> 网易云 </a><div class="mx-1.5 text-[var(--meta-divider)] text-sm">/</div>
                    <a href="/archive/tag/Music/" aria-label="View all posts with the Music tag" class="link-lg transition text-50 text-sm font-medium
                                hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> Music </a>  </div> </div> <!-- page views -->  </div>  <!-- description --> <div class="transition text-75 mb-3.5 pr-4" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> 可恶的网易云！明明只是想安静听歌，结果还要跟压制模块斗智斗勇(&gt;_&lt;) </div> <!-- word count, read time and page views --> <div class="text-sm text-black/30 dark:text-white/30 flex gap-4 transition" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">475 字</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">|</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">2 分钟</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">|</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <span class="text-50 text-sm font-medium" id="page-views-cloudpress" data-astro-cid-iyiqi2so style="--coverWidth: 28%;">统计加载中...</span> </div> </div> </div> <a href="/posts/cloudpress/" aria-label="网易云·静寂小魔法" class="group max-h-[20vh] md:max-h-none mx-4 mt-4 -mb-2 md:mb-0 md:mx-0 md:mt-0 md:w-[var(--coverWidth)] relative md:absolute md:top-3 md:bottom-3 md:right-3 rounded-xl overflow-hidden active:scale-95" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <div class="absolute pointer-events-none z-10 w-full h-full group-hover:bg-black/30 group-active:bg-black/50 transition" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"></div> <!-- 封面图上的箭头 --> <div class="absolute pointer-events-none z-20 w-full h-full flex items-center justify-center " data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition opacity-0 group-hover:opacity-100 scale-50 group-hover:scale-100 text-white text-5xl" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </div> <div class="w-full h-full overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="https://s3.yumeyuka.plus/2025/1758870730861.webp" alt="Cover Image of the Post" class="w-full h-full object-cover" style="object-position: center"> </div> </a>  </div> <div class="transition border-t-[1px] border-dashed mx-6 border-black/10 dark:border-white/[0.15] last:border-t-0 md:hidden" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"></div> <script>(function(){const entry = {"id":"CloudPress.md","data":{"title":"网易云·静寂小魔法","published":"2025-07-07T00:00:00.000Z","draft":false,"description":"可恶的网易云！明明只是想安静听歌，结果还要跟压制模块斗智斗勇(>_<)","image":"https://s3.yumeyuka.plus/2025/1758870730861.webp","tags":["网易云","Music"],"category":"知识","lang":"","prevTitle":"DNS的秘密日记～从hosts开始的物语（下）","prevSlug":"hosts-dns-part2","nextTitle":"从 EdgeOne 开始的奇妙旅程——加速你的 GitHub 图床","nextSlug":"edgeone-gh"},"body":"本来一个月前就该发出来的，最近突然想起来还没发出来，\n这一版相比之前没什么区别，还是建议更新到此版本，上版是 `CPP` 写的，这一版用 `kotlin native` 重写了,逻辑上没有变化，还是监听前台进程然后kill\n掉多余的不需要的服务\n\n国内的毒瘤 APP 都太多了，点名网易云最为代表，听歌 APP 什么都有，本来性能就很差，还要在后台留一堆不需要的服务，太坏了\n\n> [!NOTE]\n>\n> 非常 素晴らしい\n\n| `编写语言` |    kotlin    |\n|--------|:------------:|\n| `压制效果` | 中等，不知道网易云太坏了 |\n| `bug`  |     几乎没有     |\n| `评价`   | 能用，但不多，治标不治本 |\n\n**下载链接**：[Yume-Yunyun.zip](https://yumeyuka.plus/zip/Yume-Yunyun.zip)\n\n## 示例伪代码\n\n```c++\n#include \"head.hpp\"\n\nmain() \n    Logger::Create(INFO, \"/sdcard/Android/Yume-Yunyun/server.log\")\n    start_thread(clearLog).detach()\n\n    cloudMusicPackage = \"com.netease.cloudmusic\"\n    playProcess = \"com.netease.cloudmusic:play\"\n    CHECK_INTERVAL = 30\n\n    Logger::Info(\"服务已启动，监控网易云音乐进程\")\n\n    while (true)\n        if (!isAppRunning(cloudMusicPackage))\n            sleep(CHECK_INTERVAL)\n            continue\n\n        currentAppName = getCurrentAppName()\n        Logger::Info(\"当前前台应用: \" + currentAppName)\n\n        if (currentAppName 不包含 cloudMusicPackage)\n            processes = getAppProcessesAndPIDs(cloudMusicPackage)\n            Logger::Info(\"网易云不在前台，找到进程数：\" + processes.size())\n\n            if (processes 为空)\n                Logger::Info(\"没有找到进程，等待下一次检查\")\n            else\n                for each process in processes\n                    if (process.name 包含 playProcess)\n                        Logger::Info(\"保留播放进程: \" + process.name + \", PID: \" + process.pid)\n                    else\n                        Logger::Info(\"终止进程: \" + process.name + \", PID: \" + process.pid)\n                        killProcess(process.pid)\n        else\n            Logger::Info(\"网易云音乐在前台，不做操作\")\n        \n        sleep(CHECK_INTERVAL)\n\n```\n\nKt Native 编译出来的目标 ELF 大小上和 C++ 差距不大,但是运行时内存占用可谓是天差地别 ,差了近 10 倍 的内存占用 ,当然 Kt\nNative 会自动 GC 回收内存, 以本模块为例,大概 刚运行时为 50M 一段时间之后 GC 会到25M ,差不多回收了 1/2 但是和 C++\n编译出来还是差距很大\n\n> [!TIP]\n>\n> Kt Native MacOS 和 IOS 为大致为第一梯队 , Linux 差不多为第二梯队, Android 和Windows差不多就是第三梯队了\n\n![23-21-09.webp](https://s3.yumeyuka.plus/2025/23-21-09.webp)","filePath":"src/content/posts/CloudPress.md","digest":"3c96e3b20f049b24","rendered":{"html":"<p>本来一个月前就该发出来的，最近突然想起来还没发出来，\n这一版相比之前没什么区别，还是建议更新到此版本，上版是 <code>CPP</code> 写的，这一版用 <code>kotlin native</code> 重写了,逻辑上没有变化，还是监听前台进程然后kill\n掉多余的不需要的服务</p>\n<p>国内的毒瘤 APP 都太多了，点名网易云最为代表，听歌 APP 什么都有，本来性能就很差，还要在后台留一堆不需要的服务，太坏了</p>\n<blockquote class=\"admonition bdm-note\"><span class=\"bdm-title\">NOTE</span><p>非常 素晴らしい</p></blockquote>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th><code>编写语言</code></th><th align=\"center\">kotlin</th></tr></thead><tbody><tr><td><code>压制效果</code></td><td align=\"center\">中等，不知道网易云太坏了</td></tr><tr><td><code>bug</code></td><td align=\"center\">几乎没有</td></tr><tr><td><code>评价</code></td><td align=\"center\">能用，但不多，治标不治本</td></tr></tbody></table>\n<p><strong>下载链接</strong>：<a href=\"https://yumeyuka.plus/zip/Yume-Yunyun.zip\">Yume-Yunyun.zip</a></p>\n<section><h2 id=\"示例伪代码\">示例伪代码<a class=\"anchor\" href=\"#示例伪代码\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.4fsv9.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"c++\" class=\"wrap\" style=\"--ecMaxLine:89ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#F97583;--1:#F97583\">#include</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"head.hpp\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#B392F0;--1:#B392F0\">main</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">()</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#B392F0;--1:#B392F0\">Logger</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">::</span><span style=\"--0:#B392F0;--1:#B392F0\">Create</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(INFO, </span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"/sdcard/Android/Yume-Yunyun/server.log\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#B392F0;--1:#B392F0\">start_thread</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(clearLog).</span><span style=\"--0:#B392F0;--1:#B392F0\">detach</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">()</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">cloudMusicPackage </span><span style=\"--0:#F97583;--1:#F97583\">=</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"com.netease.cloudmusic\"</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">playProcess </span><span style=\"--0:#F97583;--1:#F97583\">=</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"com.netease.cloudmusic:play\"</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">    </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">CHECK_INTERVAL </span><span style=\"--0:#F97583;--1:#F97583\">=</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#79B8FF;--1:#79B8FF\">30</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">10</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">11</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#B392F0;--1:#B392F0\">Logger</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">::</span><span style=\"--0:#B392F0;--1:#B392F0\">Info</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"服务已启动，监控网易云音乐进程\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">12</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">13</div></div><div class=\"code\"><span class=\"indent\">    </span><span style=\"--0:#F97583;--1:#F97583\">while</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> (</span><span style=\"--0:#79B8FF;--1:#79B8FF\">true</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">14</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#F97583;--1:#F97583\">if</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> (</span><span style=\"--0:#F97583;--1:#F97583\">!</span><span style=\"--0:#B392F0;--1:#B392F0\">isAppRunning</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(cloudMusicPackage))</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">15</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#B392F0;--1:#B392F0\">sleep</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(CHECK_INTERVAL)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">16</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#F97583;--1:#F97583\">continue</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">17</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">18</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">        </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">currentAppName </span><span style=\"--0:#F97583;--1:#F97583\">=</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">getCurrentAppName</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">()</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">19</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#B392F0;--1:#B392F0\">Logger</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">::</span><span style=\"--0:#B392F0;--1:#B392F0\">Info</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"当前前台应用: \"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#F97583;--1:#F97583\">+</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> currentAppName)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">20</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">21</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#F97583;--1:#F97583\">if</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> (currentAppName 不包含 cloudMusicPackage)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">22</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#E1E4E8;--1:#E1E4E8\">            </span></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">processes </span><span style=\"--0:#F97583;--1:#F97583\">=</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#B392F0;--1:#B392F0\">getAppProcessesAndPIDs</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(cloudMusicPackage)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">23</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#B392F0;--1:#B392F0\">Logger</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">::</span><span style=\"--0:#B392F0;--1:#B392F0\">Info</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"网易云不在前台，找到进程数：\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#F97583;--1:#F97583\">+</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> processes.</span><span style=\"--0:#B392F0;--1:#B392F0\">size</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">())</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">24</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">25</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#F97583;--1:#F97583\">if</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> (processes 为空)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">26</div></div><div class=\"code\"><span class=\"indent\">                </span><span style=\"--0:#B392F0;--1:#B392F0\">Logger</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">::</span><span style=\"--0:#B392F0;--1:#B392F0\">Info</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"没有找到进程，等待下一次检查\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">27</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#F97583;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:16ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">28</div></div><div class=\"code\"><span class=\"indent\">                </span><span style=\"--0:#F97583;--1:#F97583\">for</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> each process in processes</span></div></div><div class=\"ec-line\" style=\"--ecIndent:20ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">29</div></div><div class=\"code\"><span class=\"indent\">                    </span><span style=\"--0:#F97583;--1:#F97583\">if</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> (process.name 包含 playProcess)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:24ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">30</div></div><div class=\"code\"><span class=\"indent\">                        </span><span style=\"--0:#B392F0;--1:#B392F0\">Logger</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">::</span><span style=\"--0:#B392F0;--1:#B392F0\">Info</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"保留播放进程: \"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#F97583;--1:#F97583\">+</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> process.name </span><span style=\"--0:#F97583;--1:#F97583\">+</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\", PID: \"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#F97583;--1:#F97583\">+</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> process.pid)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:20ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">31</div></div><div class=\"code\"><span class=\"indent\">                    </span><span style=\"--0:#F97583;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:24ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">32</div></div><div class=\"code\"><span class=\"indent\">                        </span><span style=\"--0:#B392F0;--1:#B392F0\">Logger</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">::</span><span style=\"--0:#B392F0;--1:#B392F0\">Info</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"终止进程: \"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#F97583;--1:#F97583\">+</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> process.name </span><span style=\"--0:#F97583;--1:#F97583\">+</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\", PID: \"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#F97583;--1:#F97583\">+</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> process.pid)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:24ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">33</div></div><div class=\"code\"><span class=\"indent\">                        </span><span style=\"--0:#B392F0;--1:#B392F0\">killProcess</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(process.pid)</span></div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">34</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#F97583;--1:#F97583\">else</span></div></div><div class=\"ec-line\" style=\"--ecIndent:12ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">35</div></div><div class=\"code\"><span class=\"indent\">            </span><span style=\"--0:#B392F0;--1:#B392F0\">Logger</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">::</span><span style=\"--0:#B392F0;--1:#B392F0\">Info</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(</span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">\"网易云音乐在前台，不做操作\"</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">)</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">36</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\" style=\"--ecIndent:8ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">37</div></div><div class=\"code\"><span class=\"indent\">        </span><span style=\"--0:#B392F0;--1:#B392F0\">sleep</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">(CHECK_INTERVAL)</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>Kt Native 编译出来的目标 ELF 大小上和 C++ 差距不大,但是运行时内存占用可谓是天差地别 ,差了近 10 倍 的内存占用 ,当然 Kt\nNative 会自动 GC 回收内存, 以本模块为例,大概 刚运行时为 50M 一段时间之后 GC 会到25M ,差不多回收了 1/2 但是和 C++\n编译出来还是差距很大</p><blockquote class=\"admonition bdm-tip\"><span class=\"bdm-title\">TIP</span><p>Kt Native MacOS 和 IOS 为大致为第一梯队 , Linux 差不多为第二梯队, Android 和Windows差不多就是第三梯队了</p></blockquote><p><img src=\"https://s3.yumeyuka.plus/2025/23-21-09.webp\" alt=\"23-21-09.webp\"></p></section>","metadata":{"headings":[{"depth":2,"slug":"示例伪代码","text":"示例伪代码#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"网易云·静寂小魔法","published":"2025-07-07T00:00:00.000Z","description":"可恶的网易云！明明只是想安静听歌，结果还要跟压制模块斗智斗勇(>_<)","image":"https://s3.yumeyuka.plus/2025/1758870730861.webp","tags":["网易云","Music"],"category":"知识","draft":false,"minutes":2,"words":475,"excerpt":"本来一个月前就该发出来的，最近突然想起来还没发出来，\n这一版相比之前没什么区别，还是建议更新到此版本，上版是 CPP 写的，这一版用 kotlin native 重写了,逻辑上没有变化，还是监听前台进程然后kill\n掉多余的不需要的服务"},"imagePaths":[]}},"collection":"posts","slug":"cloudpress"};
const umamiConfig = {"enable":true,"baseUrl":"https://eu.umami.is","shareId":"QA4C7dikiZNVwva3","timezone":"Asia/Shanghai"};
const unavailableText = "统计不可用。请检查是否屏蔽了Umami域名，如AdGuard和AdBlock等插件";
const viewsText = "浏览";
const visitsText = "访客";

    // 客户端统计文案生成函数
    function generateStatsText(pageViews, visits) {
        return `${viewsText} ${pageViews} · ${visitsText} ${visits}`;
    }

    // 获取文章浏览量统计
    async function fetchPostCardViews(slug) {
        if (!umamiConfig.enable) {
            return;
        }

        try {
            // 调用全局工具获取 Umami 分享数据
            const { websiteId, token } = await getUmamiShareData(umamiConfig.baseUrl, umamiConfig.shareId);

            // 第二步：获取统计数据
            const currentTimestamp = Date.now();
            const statsUrl = `${umamiConfig.baseUrl}/api/websites/${websiteId}/stats?startAt=0&endAt=${currentTimestamp}&unit=hour&timezone=${encodeURIComponent(umamiConfig.timezone)}&url=%2Fposts%2F${slug}%2F&compare=false`;

            const statsResponse = await fetch(statsUrl, {
                headers: {
                    'x-umami-share-token': token
                }
            });

            if (statsResponse.status === 401) {
                clearUmamiShareCache();
                return await fetchPostCardViews(slug);
            }

            if (!statsResponse.ok) {
                throw new Error('获取统计数据失败');
            }

            const statsData = await statsResponse.json();
            const pageViews = statsData.pageviews?.value || 0;
            const visits = statsData.visits?.value || 0;

            const displayElement = document.getElementById(`page-views-${slug}`);
            if (displayElement) {
                displayElement.textContent = generateStatsText(pageViews, visits);
            }
        } catch (error) {
            console.error('Error fetching page views for', slug, ':', error);
            const displayElement = document.getElementById(`page-views-${slug}`);
            if (displayElement) {
                displayElement.textContent = unavailableText;
            }
        }
    }

    // 页面加载完成后获取统计数据
    function initPostCardStats() {
        const slug = entry.slug;
        if (slug) {
            fetchPostCardViews(slug);
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPostCardStats);
    } else {
        initPostCardStats();
    }
})();</script> <div class="card-base flex flex-col-reverse md:flex-col w-full rounded-[var(--radius-large)] overflow-hidden relative onload-animation" style="animation-delay: calc(var(--content-delay) + 150ms);; --coverWidth: 28%;" data-astro-cid-iyiqi2so> <div class="pl-6 md:pl-9 pr-6 md:pr-2 pt-6 md:pt-7 pb-6 relative w-full md:w-[calc(100%_-_var(--coverWidth)_-_12px)]" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <a href="/posts/hosts-dns-part2/" class="transition group w-full block font-bold mb-3 text-3xl text-90
        hover:text-[var(--primary)] dark:hover:text-[var(--primary)]
        active:text-[var(--title-active)] dark:active:text-[var(--title-active)]
        before:w-1 before:h-5 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:top-[35px] before:left-[18px] before:hidden md:before:block
        " data-astro-cid-iyiqi2so style="--coverWidth: 28%;">  DNS的秘密日记～从hosts开始的物语（下） <svg width="1em" height="1em" viewBox="0 0 24 24" class="inline text-[2rem] text-[var(--primary)] md:hidden translate-y-0.5 absolute" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[var(--primary)] text-[2rem] transition hidden md:inline absolute translate-y-0.5 opacity-0 group-hover:opacity-100 -translate-x-1 group-hover:translate-x-0" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </a> <!-- metadata --> <div class="flex flex-wrap text-neutral-500 dark:text-neutral-400 items-center gap-4 gap-x-4 gap-y-2 mb-4"> <!-- publish date --> <div class="flex items-center"> <div class="meta-icon"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-xl" data-icon="material-symbols:calendar-today-outline-rounded">   <use href="#ai:material-symbols:calendar-today-outline-rounded"></use>  </svg> </div> <span class="text-50 text-sm font-medium">2024-09-26</span> </div> <!-- update date -->  <!-- tags --> <div class="items-center hidden md:flex"> <div class="meta-icon"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-xl" data-icon="material-symbols:tag-rounded">   <use href="#ai:material-symbols:tag-rounded"></use>  </svg> </div> <div class="flex flex-row flex-nowrap items-center"> <div class="hidden mx-1.5 text-[var(--meta-divider)] text-sm">/</div>
                    <a href="/archive/tag/DNS/" aria-label="View all posts with the DNS tag" class="link-lg transition text-50 text-sm font-medium
                                hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> DNS </a><div class="mx-1.5 text-[var(--meta-divider)] text-sm">/</div>
                    <a href="/archive/tag/hosts/" aria-label="View all posts with the hosts tag" class="link-lg transition text-50 text-sm font-medium
                                hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> hosts </a>  </div> </div> <!-- page views -->  </div>  <!-- description --> <div class="transition text-75 mb-3.5 pr-4" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> 从最初的HOSTS.TXT到如今庞大的DNS体系，这篇小日记记录了域名解析的发展历程 </div> <!-- word count, read time and page views --> <div class="text-sm text-black/30 dark:text-white/30 flex gap-4 transition" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">844 字</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">|</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">4 分钟</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">|</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <span class="text-50 text-sm font-medium" id="page-views-hosts-dns-part2" data-astro-cid-iyiqi2so style="--coverWidth: 28%;">统计加载中...</span> </div> </div> </div> <a href="/posts/hosts-dns-part2/" aria-label="DNS的秘密日记～从hosts开始的物语（下）" class="group max-h-[20vh] md:max-h-none mx-4 mt-4 -mb-2 md:mb-0 md:mx-0 md:mt-0 md:w-[var(--coverWidth)] relative md:absolute md:top-3 md:bottom-3 md:right-3 rounded-xl overflow-hidden active:scale-95" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <div class="absolute pointer-events-none z-10 w-full h-full group-hover:bg-black/30 group-active:bg-black/50 transition" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"></div> <!-- 封面图上的箭头 --> <div class="absolute pointer-events-none z-20 w-full h-full flex items-center justify-center " data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition opacity-0 group-hover:opacity-100 scale-50 group-hover:scale-100 text-white text-5xl" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </div> <div class="w-full h-full overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="https://s3.yumeyuka.plus/2025/1758683286326.webp" alt="Cover Image of the Post" class="w-full h-full object-cover" style="object-position: center"> </div> </a>  </div> <div class="transition border-t-[1px] border-dashed mx-6 border-black/10 dark:border-white/[0.15] last:border-t-0 md:hidden" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"></div> <script>(function(){const entry = {"id":"hosts-dns-part2.md","data":{"title":"DNS的秘密日记～从hosts开始的物语（下）","published":"2024-09-26T00:00:00.000Z","draft":false,"description":"从最初的HOSTS.TXT到如今庞大的DNS体系，这篇小日记记录了域名解析的发展历程","image":"https://s3.yumeyuka.plus/2025/1758683286326.webp","tags":["DNS","hosts"],"category":"知识","lang":"","prevTitle":"DNS的秘密日记～从hosts开始的物语（上）","prevSlug":"hosts_dns_part1","nextTitle":"网易云·静寂小魔法","nextSlug":"cloudpress"},"body":"# 域名解析系统的发展历程\n\n随着互联网从实验性网络演进为全球信息基础设施，**域名解析系统（DNS）**也在不断演进，以满足规模、性能与安全方面的需求。以下从早期方案到现代机制，梳理其关键发展节点。\n\n## 一、主机文件时代：HOSTS.TXT（1980 年代初）\n\n在 DNS 出现之前，所有域名解析依赖于一份集中维护的文本文件—— **`HOSTS.TXT`**\n- 由斯坦福研究所（SRI）网络信息中心（NIC）负责更新，记录域名与 IP 地址的对应关系\n- 每台主机须定期下载并手动更新此文件，才能完成网址访问\n\n随着联网设备激增，HOSTS.TXT 文件规模迅速膨胀，更新频率与分发成本骤增，系统效率和可扩展性难以为继\n\n## 二、DNS 系统的诞生与层级化设计（1983 年）\n\n为解决集中式方案的瓶颈，Paul Mockapetris 于 1983 年提出 DNS 概念，并在 RFC 882、RFC 883 中定义首版协议，后被 RFC 1034、RFC 1035 取代。  \nDNS 的核心特点：  \n\n- **分布式架构**：将域名空间拆分成多个负责不同子区的域名服务器。  \n- **层级化命名**：以`“.”`分隔，从根（`Root`）到顶级域（TLD）、再到二级、三级域名，逐级查询并缓存结果。\n\n\n\n### 1. 通用顶级域名（gTLD）  \n\n\n> - .com：面向各类商业实体与企业的网站；\n> - .org：主要供非营利组织及公益机构使用；\n> - .net：最初为网络服务提供商设计，现广泛用于互联网基础设施相关站点；\n> - .edu：专用于经认证的教育机构及其下属学术单位；\n> - .gov/.mil：分别保留给美国政府机构与军事部门。\n\n\n### 2. 国家和地区顶级域名（ccTLD）  \n- 以 ISO 3166-1 alpha-2 两字母代码表示，例如 .cn（中国）、.uk（英国）。\n\n### 3. 二级及多级域名\n\n- **二级域名**：通常为组织或品牌标识，如 example.com 中的 example。  \n- **三级域名**及更高级别，通常用于区分子业务或区域服务，如 www.example.com、mail.google.com。\n\n![image-20250926173701750](https://s3.yumeyuka.plus/2025/09/38972fb919b93dc6969bd72161fa71a9.webp)\n\n### 4. 安全扩展：DNSSEC（1990 年代末至今)\n\n随着网络安全威胁加剧，原生 DNS 缺乏数据完整性与身份验证机制，易受到中间人和缓存投毒攻击。为此，**DNS 安全扩展（DNSSEC）**应运而生：  \n- 对 DNS 记录链使用数字签名，确保查询结果未被篡改；  \n- 客户端验证签名后，方可信任域名映射。\n\n## 三、根域名服务器的全球部署\n\nDNS 根服务器最初仅部署于美国境内。为降低查询延迟、提升容灾能力，13 个逻辑根服务器实例通过 Anycast 技术，现已分布在全球多个节点，由不同组织共同管理。  \n\n### 为什么根服务器逻辑上只有 13 个？  \n- **UDP 包大小限制**：DNS 查询默认使用 UDP，最大报文长度 512 字节；  \n- **根提示文件**：需在此限制内携带所有根服务器的 IP 列表；  \n- 13 个 IPv4 地址（另含 IPv6 扩展）恰能兼顾完整性与报文大小。\n\n为了支持中文、阿拉伯文、韩文等非拉丁字符，**国际化域名（IDN**于 2000 年代推行。IDN 采用 Punycode 将 Unicode 字符映射为 ASCII，以兼容现有 DNS 协议，实现全球多语言域名互访。","filePath":"src/content/posts/hosts-dns-part2.md","digest":"7bfdb2276207ae70","rendered":{"html":"<section><h1 id=\"域名解析系统的发展历程\">域名解析系统的发展历程<a class=\"anchor\" href=\"#域名解析系统的发展历程\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h1><p>随着互联网从实验性网络演进为全球信息基础设施，**域名解析系统（DNS）**也在不断演进，以满足规模、性能与安全方面的需求。以下从早期方案到现代机制，梳理其关键发展节点。</p><section><h2 id=\"一主机文件时代hoststxt1980-年代初\">一、主机文件时代：HOSTS.TXT（1980 年代初）<a class=\"anchor\" href=\"#一主机文件时代hoststxt1980-年代初\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>在 DNS 出现之前，所有域名解析依赖于一份集中维护的文本文件—— <strong><code>HOSTS.TXT</code></strong></p><ul>\n<li>由斯坦福研究所（SRI）网络信息中心（NIC）负责更新，记录域名与 IP 地址的对应关系</li>\n<li>每台主机须定期下载并手动更新此文件，才能完成网址访问</li>\n</ul><p>随着联网设备激增，HOSTS.TXT 文件规模迅速膨胀，更新频率与分发成本骤增，系统效率和可扩展性难以为继</p></section><section><h2 id=\"二dns-系统的诞生与层级化设计1983-年\">二、DNS 系统的诞生与层级化设计（1983 年）<a class=\"anchor\" href=\"#二dns-系统的诞生与层级化设计1983-年\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>为解决集中式方案的瓶颈，Paul Mockapetris 于 1983 年提出 DNS 概念，并在 RFC 882、RFC 883 中定义首版协议，后被 RFC 1034、RFC 1035 取代。<br>\nDNS 的核心特点：</p><ul>\n<li><strong>分布式架构</strong>：将域名空间拆分成多个负责不同子区的域名服务器。</li>\n<li><strong>层级化命名</strong>：以<code>“.”</code>分隔，从根（<code>Root</code>）到顶级域（TLD）、再到二级、三级域名，逐级查询并缓存结果。</li>\n</ul><section><h3 id=\"1-通用顶级域名gtld\">1. 通用顶级域名（gTLD）<a class=\"anchor\" href=\"#1-通用顶级域名gtld\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><blockquote>\n<ul>\n<li>.com：面向各类商业实体与企业的网站；</li>\n<li>.org：主要供非营利组织及公益机构使用；</li>\n<li>.net：最初为网络服务提供商设计，现广泛用于互联网基础设施相关站点；</li>\n<li>.edu：专用于经认证的教育机构及其下属学术单位；</li>\n<li>.gov/.mil：分别保留给美国政府机构与军事部门。</li>\n</ul>\n</blockquote></section><section><h3 id=\"2-国家和地区顶级域名cctld\">2. 国家和地区顶级域名（ccTLD）<a class=\"anchor\" href=\"#2-国家和地区顶级域名cctld\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li>以 ISO 3166-1 alpha-2 两字母代码表示，例如 .cn（中国）、.uk（英国）。</li>\n</ul></section><section><h3 id=\"3-二级及多级域名\">3. 二级及多级域名<a class=\"anchor\" href=\"#3-二级及多级域名\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><strong>二级域名</strong>：通常为组织或品牌标识，如 example.com 中的 example。</li>\n<li><strong>三级域名</strong>及更高级别，通常用于区分子业务或区域服务，如 <a href=\"http://www.example.com%E3%80%81mail.google.com%E3%80%82\">www.example.com、mail.google.com。</a></li>\n</ul><p><img src=\"https://s3.yumeyuka.plus/2025/09/38972fb919b93dc6969bd72161fa71a9.webp\" alt=\"image-20250926173701750\"></p></section><section><h3 id=\"4-安全扩展dnssec1990-年代末至今\">4. 安全扩展：DNSSEC（1990 年代末至今)<a class=\"anchor\" href=\"#4-安全扩展dnssec1990-年代末至今\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>随着网络安全威胁加剧，原生 DNS 缺乏数据完整性与身份验证机制，易受到中间人和缓存投毒攻击。为此，**DNS 安全扩展（DNSSEC）**应运而生：</p><ul>\n<li>对 DNS 记录链使用数字签名，确保查询结果未被篡改；</li>\n<li>客户端验证签名后，方可信任域名映射。</li>\n</ul></section></section><section><h2 id=\"三根域名服务器的全球部署\">三、根域名服务器的全球部署<a class=\"anchor\" href=\"#三根域名服务器的全球部署\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>DNS 根服务器最初仅部署于美国境内。为降低查询延迟、提升容灾能力，13 个逻辑根服务器实例通过 Anycast 技术，现已分布在全球多个节点，由不同组织共同管理。</p><section><h3 id=\"为什么根服务器逻辑上只有-13-个\">为什么根服务器逻辑上只有 13 个？<a class=\"anchor\" href=\"#为什么根服务器逻辑上只有-13-个\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><ul>\n<li><strong>UDP 包大小限制</strong>：DNS 查询默认使用 UDP，最大报文长度 512 字节；</li>\n<li><strong>根提示文件</strong>：需在此限制内携带所有根服务器的 IP 列表；</li>\n<li>13 个 IPv4 地址（另含 IPv6 扩展）恰能兼顾完整性与报文大小。</li>\n</ul><p>为了支持中文、阿拉伯文、韩文等非拉丁字符，<strong>国际化域名（IDN</strong>于 2000 年代推行。IDN 采用 Punycode 将 Unicode 字符映射为 ASCII，以兼容现有 DNS 协议，实现全球多语言域名互访。</p></section></section></section>","metadata":{"headings":[{"depth":1,"slug":"域名解析系统的发展历程","text":"域名解析系统的发展历程#"},{"depth":2,"slug":"一主机文件时代hoststxt1980-年代初","text":"一、主机文件时代：HOSTS.TXT（1980 年代初）#"},{"depth":2,"slug":"二dns-系统的诞生与层级化设计1983-年","text":"二、DNS 系统的诞生与层级化设计（1983 年）#"},{"depth":3,"slug":"1-通用顶级域名gtld","text":"1. 通用顶级域名（gTLD）#"},{"depth":3,"slug":"2-国家和地区顶级域名cctld","text":"2. 国家和地区顶级域名（ccTLD）#"},{"depth":3,"slug":"3-二级及多级域名","text":"3. 二级及多级域名#"},{"depth":3,"slug":"4-安全扩展dnssec1990-年代末至今","text":"4. 安全扩展：DNSSEC（1990 年代末至今)#"},{"depth":2,"slug":"三根域名服务器的全球部署","text":"三、根域名服务器的全球部署#"},{"depth":3,"slug":"为什么根服务器逻辑上只有-13-个","text":"为什么根服务器逻辑上只有 13 个？#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"DNS的秘密日记～从hosts开始的物语（下）","published":"2024-09-26T00:00:00.000Z","description":"从最初的HOSTS.TXT到如今庞大的DNS体系，这篇小日记记录了域名解析的发展历程","image":"https://s3.yumeyuka.plus/2025/1758683286326.webp","tags":["DNS","hosts"],"category":"知识","draft":false,"minutes":4,"words":844,"excerpt":"随着互联网从实验性网络演进为全球信息基础设施，**域名解析系统（DNS）**也在不断演进，以满足规模、性能与安全方面的需求。以下从早期方案到现代机制，梳理其关键发展节点。"},"imagePaths":[]}},"collection":"posts","slug":"hosts-dns-part2"};
const umamiConfig = {"enable":true,"baseUrl":"https://eu.umami.is","shareId":"QA4C7dikiZNVwva3","timezone":"Asia/Shanghai"};
const unavailableText = "统计不可用。请检查是否屏蔽了Umami域名，如AdGuard和AdBlock等插件";
const viewsText = "浏览";
const visitsText = "访客";

    // 客户端统计文案生成函数
    function generateStatsText(pageViews, visits) {
        return `${viewsText} ${pageViews} · ${visitsText} ${visits}`;
    }

    // 获取文章浏览量统计
    async function fetchPostCardViews(slug) {
        if (!umamiConfig.enable) {
            return;
        }

        try {
            // 调用全局工具获取 Umami 分享数据
            const { websiteId, token } = await getUmamiShareData(umamiConfig.baseUrl, umamiConfig.shareId);

            // 第二步：获取统计数据
            const currentTimestamp = Date.now();
            const statsUrl = `${umamiConfig.baseUrl}/api/websites/${websiteId}/stats?startAt=0&endAt=${currentTimestamp}&unit=hour&timezone=${encodeURIComponent(umamiConfig.timezone)}&url=%2Fposts%2F${slug}%2F&compare=false`;

            const statsResponse = await fetch(statsUrl, {
                headers: {
                    'x-umami-share-token': token
                }
            });

            if (statsResponse.status === 401) {
                clearUmamiShareCache();
                return await fetchPostCardViews(slug);
            }

            if (!statsResponse.ok) {
                throw new Error('获取统计数据失败');
            }

            const statsData = await statsResponse.json();
            const pageViews = statsData.pageviews?.value || 0;
            const visits = statsData.visits?.value || 0;

            const displayElement = document.getElementById(`page-views-${slug}`);
            if (displayElement) {
                displayElement.textContent = generateStatsText(pageViews, visits);
            }
        } catch (error) {
            console.error('Error fetching page views for', slug, ':', error);
            const displayElement = document.getElementById(`page-views-${slug}`);
            if (displayElement) {
                displayElement.textContent = unavailableText;
            }
        }
    }

    // 页面加载完成后获取统计数据
    function initPostCardStats() {
        const slug = entry.slug;
        if (slug) {
            fetchPostCardViews(slug);
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPostCardStats);
    } else {
        initPostCardStats();
    }
})();</script> <div class="card-base flex flex-col-reverse md:flex-col w-full rounded-[var(--radius-large)] overflow-hidden relative onload-animation" style="animation-delay: calc(var(--content-delay) + 200ms);; --coverWidth: 28%;" data-astro-cid-iyiqi2so> <div class="pl-6 md:pl-9 pr-6 md:pr-2 pt-6 md:pt-7 pb-6 relative w-full md:w-[calc(100%_-_var(--coverWidth)_-_12px)]" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <a href="/posts/hosts_dns_part1/" class="transition group w-full block font-bold mb-3 text-3xl text-90
        hover:text-[var(--primary)] dark:hover:text-[var(--primary)]
        active:text-[var(--title-active)] dark:active:text-[var(--title-active)]
        before:w-1 before:h-5 before:rounded-md before:bg-[var(--primary)]
        before:absolute before:top-[35px] before:left-[18px] before:hidden md:before:block
        " data-astro-cid-iyiqi2so style="--coverWidth: 28%;">  DNS的秘密日记～从hosts开始的物语（上） <svg width="1em" height="1em" viewBox="0 0 24 24" class="inline text-[2rem] text-[var(--primary)] md:hidden translate-y-0.5 absolute" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[var(--primary)] text-[2rem] transition hidden md:inline absolute translate-y-0.5 opacity-0 group-hover:opacity-100 -translate-x-1 group-hover:translate-x-0" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </a> <!-- metadata --> <div class="flex flex-wrap text-neutral-500 dark:text-neutral-400 items-center gap-4 gap-x-4 gap-y-2 mb-4"> <!-- publish date --> <div class="flex items-center"> <div class="meta-icon"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-xl" data-icon="material-symbols:calendar-today-outline-rounded">   <use href="#ai:material-symbols:calendar-today-outline-rounded"></use>  </svg> </div> <span class="text-50 text-sm font-medium">2024-09-23</span> </div> <!-- update date -->  <!-- tags --> <div class="items-center hidden md:flex"> <div class="meta-icon"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-xl" data-icon="material-symbols:tag-rounded">   <use href="#ai:material-symbols:tag-rounded"></use>  </svg> </div> <div class="flex flex-row flex-nowrap items-center"> <div class="hidden mx-1.5 text-[var(--meta-divider)] text-sm">/</div>
                    <a href="/archive/tag/DNS/" aria-label="View all posts with the DNS tag" class="link-lg transition text-50 text-sm font-medium
                                hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> DNS </a><div class="mx-1.5 text-[var(--meta-divider)] text-sm">/</div>
                    <a href="/archive/tag/hosts/" aria-label="View all posts with the hosts tag" class="link-lg transition text-50 text-sm font-medium
                                hover:text-[var(--primary)] dark:hover:text-[var(--primary)] whitespace-nowrap"> hosts </a>  </div> </div> <!-- page views -->  </div>  <!-- description --> <div class="transition text-75 mb-3.5 pr-4" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> 从hosts酱到DNS君的故事～带你认识域名解析的基础原理，理解为什么修改hosts能直连 </div> <!-- word count, read time and page views --> <div class="text-sm text-black/30 dark:text-white/30 flex gap-4 transition" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">1144 字</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">|</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">6 分钟</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;">|</div> <div data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <span class="text-50 text-sm font-medium" id="page-views-hosts_dns_part1" data-astro-cid-iyiqi2so style="--coverWidth: 28%;">统计加载中...</span> </div> </div> </div> <a href="/posts/hosts_dns_part1/" aria-label="DNS的秘密日记～从hosts开始的物语（上）" class="group max-h-[20vh] md:max-h-none mx-4 mt-4 -mb-2 md:mb-0 md:mx-0 md:mt-0 md:w-[var(--coverWidth)] relative md:absolute md:top-3 md:bottom-3 md:right-3 rounded-xl overflow-hidden active:scale-95" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <div class="absolute pointer-events-none z-10 w-full h-full group-hover:bg-black/30 group-active:bg-black/50 transition" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"></div> <!-- 封面图上的箭头 --> <div class="absolute pointer-events-none z-20 w-full h-full flex items-center justify-center " data-astro-cid-iyiqi2so style="--coverWidth: 28%;"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="transition opacity-0 group-hover:opacity-100 scale-50 group-hover:scale-100 text-white text-5xl" data-astro-cid-iyiqi2so="true" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </div> <div class="w-full h-full overflow-hidden relative"> <div class="transition absolute inset-0 dark:bg-black/10 bg-opacity-50 pointer-events-none"></div>  <img src="https://s3.yumeyuka.plus/2025/23-21-08.webp" alt="Cover Image of the Post" class="w-full h-full object-cover" style="object-position: center"> </div> </a>  </div> <div class="transition border-t-[1px] border-dashed mx-6 border-black/10 dark:border-white/[0.15] last:border-t-0 md:hidden" data-astro-cid-iyiqi2so style="--coverWidth: 28%;"></div> <script>(function(){const entry = {"id":"hosts_dns_part1.md","data":{"title":"DNS的秘密日记～从hosts开始的物语（上）","published":"2024-09-23T00:00:00.000Z","draft":false,"description":"从hosts酱到DNS君的故事～带你认识域名解析的基础原理，理解为什么修改hosts能直连","image":"https://s3.yumeyuka.plus/2025/23-21-08.webp","tags":["DNS","hosts"],"category":"知识","lang":"","prevTitle":"","prevSlug":"","nextTitle":"DNS的秘密日记～从hosts开始的物语（下）","nextSlug":"hosts-dns-part2"},"body":"## hosts 是什么？\n\n很久以前，互联网刚起步时，全世界的主机数量极少，域名解析完全依赖于每台设备本地的 `hosts` 文件。这份文件里记录了互联网上所有主机的域名和对应 IP 地址。当时并没有 DNS 服务器，大家只要从专门的维护站点下载最新的 `hosts` 文件，就能直接在本机通过它完成访问。想访问哪个域名，就翻开 `hosts` 文件，找到对应的 IP，连上就行了。\n\n但随着互联网用户和服务器数量的爆炸式增长，所有人都去同一个地方拉 `hosts` 文件，文件体量越来越大、更新也越来越频繁，单是检索就耗费不少时间，根本难以支撑庞大且分布全球的网络。  \n\n当你打开 `hosts` 文件，会看到这样的记录：\n\nWindows 路径：`C:\\Windows\\System32\\drivers\\etc\\hosts`  \nLinux 路径：`/etc/hosts`  \n\n```text\n127.0.0.1       localhost\n::1             localhost ip6-localhost ip6-loopback\nff02::1         ip6-allnodes\nff02::2         ip6-allrouters\n20.205.243.166  github.com\n61.91.161.217   www.google.com\n61.91.161.217   google.com\n61.91.161.217   gcr.io\n…\n```\n\n最常见的第一行 `127.0.0.1 localhost`，就是把域名 `localhost` 直接映射到本机。第 5 行的内容告诉我们：访问 `github.com` 时，直接连到 `20.205.243.166`。一看 IP 在前、域名在后，就能瞬间明白 `hosts` 文件的作用了——把域名和 IP 直接绑在一起。\n\n## DNS 是什么？\n\nDNS（Domain Name System，域名系统）则是后来应运而生的一套分布式数据库，专门负责把人类更易记的域名（如 `www.example.com`）转换为计算机能识别的 IP 地址（如 `192.0.2.1` 或 `2001:db8::1`）。可以把 DNS 想象成电话簿，名字是域名，电话号码则是 IP。\n\n- 一条域名解析记录可以对应多个 IP，所以你在浏览器地址栏输入 `google.com` 或 `www.google.com` 都能访问同一个网站。  \n- 浏览器访问时会先加上 `https://`，但根本原因还是 DNS 把域名转成 IP。  \n\n不过，在中国大陆访问 Google 时，由于 GFW（防火长城）会检测到域名里含有“Google”这样的关键词，它会伪装成 DNS 服务器给你返回一个错误甚至恶意的 IP。因为 DNS 查询通常基于无连接、且不可靠的 UDP 协议，浏览器只会接受第一个格式正确的响应，后续正常响应就被丢弃了，于是就连不上了。这种现象叫 **DNS 缓存污染** 或 **DNS 投毒**。\n\n> 参考：从修改 hosts 文件科学上网中理解 DNS（上）\n\n## DNS 解析流程与多 IP 负载\n\n当一个域名在其权威 DNS 记录中有多个 IP 时，Local DNS（LDNS）会把它们全部返回，并随机打乱顺序。浏览器通常默认选第一个 IP 去访问：  \n1. 浏览器向 LDNS 发起解析请求。  \n2. LDNS 递归查询上级 DNS 服务器，直到权威 DNS。  \n3. 权威 DNS 返回所有 IP，顺序随机。  \n4. 浏览器挑第一个 IP 连接，若无反向代理，每个 IP 被访问的机会大致相等。  \n\n![DNS解析流程示意图](https://img.nightrainmilkyway.cn/img/v2-c3392cab45f8241c0369ec6457000df8_144名篡改与劫持\n\n### 修改 hosts 劫持解析\n\n本地解析优先级：`hosts > DNS`。  \n- 当你在 `/etc/hosts` （或 Windows 的 `hosts`）中写入某条记录后，系统会直接使用本地的映射，完全绕过远程 DNS。  \n- 这也是为什么很多翻墙教程里教你修改 `hosts`，可以直接“直连” GitHub、Google 等被屏蔽的网站。\n\n```bash\n# 修改前，ping 到真实公网 IP\nping linuxido.com\n# dig 查看到的也是 123.56.94.254\n\n# 在 /etc/hosts 里追加\necho '120.120.120.120 linuxido.com' >> /etc/hosts\n\n# 修改后，ping 走本地 hosts 指定的 IP\nping linuxido.com  # 会尝试连 120.120.120.120\n```\n\n但注意，`dig`、`host`、`nslookup` 等工具在默认查询时还是会去 DNS 服务器（如 8.8.8.8）抓记录，不走 hosts，所以它们依然会返回真实的公网 IP。\n\n### DNS 劫持与污染\n\n真正的 DNS 劫持是指攻击者或中间人伪造 DNS 响应，把域名指向恶意 IP；**DNS 缓存污染**（DNS cache pollution）便是中毒后的 DNS 服务器缓存了错误的记录，导致所有下游用户都被“毒害”。\n\n防范方法包括：  \n- 使用可信的 DNS-over-HTTPS（DoH）或 DNS-over-TLS（DoT）服务；  \n- 开启 DNSSEC 验证，确保收到的响应带有数字签名且未被篡改。\n\n## 用 hosts 实现科学上网\n\n以 GitHub 为例：  \n```text\n20.205.243.166  github.com\n```\n当你修改 hosts，把 `github.com` 指向官方最快 IP，系统就不再走中国大陆的 DNS，而是直接根据本地映射去连接，这样就能“直连”GitHub。不过单靠 hosts 有时也不够流畅，通常还会配合 FastGithub 等加速工具一起使用。","filePath":"src/content/posts/hosts_dns_part1.md","digest":"b114a5bd03131e79","rendered":{"html":"<section><h2 id=\"hosts-是什么\">hosts 是什么？<a class=\"anchor\" href=\"#hosts-是什么\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>很久以前，互联网刚起步时，全世界的主机数量极少，域名解析完全依赖于每台设备本地的 <code>hosts</code> 文件。这份文件里记录了互联网上所有主机的域名和对应 IP 地址。当时并没有 DNS 服务器，大家只要从专门的维护站点下载最新的 <code>hosts</code> 文件，就能直接在本机通过它完成访问。想访问哪个域名，就翻开 <code>hosts</code> 文件，找到对应的 IP，连上就行了。</p><p>但随着互联网用户和服务器数量的爆炸式增长，所有人都去同一个地方拉 <code>hosts</code> 文件，文件体量越来越大、更新也越来越频繁，单是检索就耗费不少时间，根本难以支撑庞大且分布全球的网络。</p><p>当你打开 <code>hosts</code> 文件，会看到这样的记录：</p><p>Windows 路径：<code>C:\\Windows\\System32\\drivers\\etc\\hosts</code><br>\nLinux 路径：<code>/etc/hosts</code></p><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/_astro/ec.4fsv9.css\"><script type=\"module\" src=\"/_astro/ec.g1fg5.js\">\x3C/script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:52ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#e1e4e8;--1:#e1e4e8\">127.0.0.1       localhost</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#e1e4e8;--1:#e1e4e8\">::1             localhost ip6-localhost ip6-loopback</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#e1e4e8;--1:#e1e4e8\">ff02::1         ip6-allnodes</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#e1e4e8;--1:#e1e4e8\">ff02::2         ip6-allrouters</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#e1e4e8;--1:#e1e4e8\">20.205.243.166  github.com</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#e1e4e8;--1:#e1e4e8\">61.91.161.217   www.google.com</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#e1e4e8;--1:#e1e4e8\">61.91.161.217   google.com</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#e1e4e8;--1:#e1e4e8\">61.91.161.217   gcr.io</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#e1e4e8;--1:#e1e4e8\">…</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>最常见的第一行 <code>127.0.0.1 localhost</code>，就是把域名 <code>localhost</code> 直接映射到本机。第 5 行的内容告诉我们：访问 <code>github.com</code> 时，直接连到 <code>20.205.243.166</code>。一看 IP 在前、域名在后，就能瞬间明白 <code>hosts</code> 文件的作用了——把域名和 IP 直接绑在一起。</p></section>\n<section><h2 id=\"dns-是什么\">DNS 是什么？<a class=\"anchor\" href=\"#dns-是什么\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>DNS（Domain Name System，域名系统）则是后来应运而生的一套分布式数据库，专门负责把人类更易记的域名（如 <code>www.example.com</code>）转换为计算机能识别的 IP 地址（如 <code>192.0.2.1</code> 或 <code>2001:db8::1</code>）。可以把 DNS 想象成电话簿，名字是域名，电话号码则是 IP。</p><ul>\n<li>一条域名解析记录可以对应多个 IP，所以你在浏览器地址栏输入 <code>google.com</code> 或 <code>www.google.com</code> 都能访问同一个网站。</li>\n<li>浏览器访问时会先加上 <code>https://</code>，但根本原因还是 DNS 把域名转成 IP。</li>\n</ul><p>不过，在中国大陆访问 Google 时，由于 GFW（防火长城）会检测到域名里含有“Google”这样的关键词，它会伪装成 DNS 服务器给你返回一个错误甚至恶意的 IP。因为 DNS 查询通常基于无连接、且不可靠的 UDP 协议，浏览器只会接受第一个格式正确的响应，后续正常响应就被丢弃了，于是就连不上了。这种现象叫 <strong>DNS 缓存污染</strong> 或 <strong>DNS 投毒</strong>。</p><blockquote>\n<p>参考：从修改 hosts 文件科学上网中理解 DNS（上）</p>\n</blockquote></section>\n<section><h2 id=\"dns-解析流程与多-ip-负载\">DNS 解析流程与多 IP 负载<a class=\"anchor\" href=\"#dns-解析流程与多-ip-负载\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>当一个域名在其权威 DNS 记录中有多个 IP 时，Local DNS（LDNS）会把它们全部返回，并随机打乱顺序。浏览器通常默认选第一个 IP 去访问：</p><ol>\n<li>浏览器向 LDNS 发起解析请求。</li>\n<li>LDNS 递归查询上级 DNS 服务器，直到权威 DNS。</li>\n<li>权威 DNS 返回所有 IP，顺序随机。</li>\n<li>浏览器挑第一个 IP 连接，若无反向代理，每个 IP 被访问的机会大致相等。</li>\n</ol><p>![DNS解析流程示意图](<a href=\"https://img.nightrainmilkyway.cn/img/v2-c3392cab45f8241c0369ec6457000df8_144%E5%90%8D%E7%AF%A1%E6%94%B9%E4%B8%8E%E5%8A%AB%E6%8C%81\">https://img.nightrainmilkyway.cn/img/v2-c3392cab45f8241c0369ec6457000df8_144名篡改与劫持</a></p><section><h3 id=\"修改-hosts-劫持解析\">修改 hosts 劫持解析<a class=\"anchor\" href=\"#修改-hosts-劫持解析\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>本地解析优先级：<code>hosts > DNS</code>。</p><ul>\n<li>当你在 <code>/etc/hosts</code> （或 Windows 的 <code>hosts</code>）中写入某条记录后，系统会直接使用本地的映射，完全绕过远程 DNS。</li>\n<li>这也是为什么很多翻墙教程里教你修改 <code>hosts</code>，可以直接“直连” GitHub、Google 等被屏蔽的网站。</li>\n</ul><div class=\"expressive-code\"><figure class=\"frame is-terminal\"><figcaption class=\"header\"><span class=\"title\"></span><span class=\"sr-only\">Terminal window</span></figcaption><pre data-language=\"bash\" class=\"wrap\" style=\"--ecMaxLine:49ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#99A0A6;--1:#99A0A6\"># 修改前，ping 到真实公网 IP</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#B392F0;--1:#B392F0\">ping</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">linuxido.com</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#99A0A6;--1:#99A0A6\"># dig 查看到的也是 123.56.94.254</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#99A0A6;--1:#99A0A6\"># 在 /etc/hosts 里追加</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#79B8FF;--1:#79B8FF\">echo</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">'120.120.120.120 linuxido.com'</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#F97583;--1:#F97583\">>></span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">/etc/hosts</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\">\n</div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#99A0A6;--1:#99A0A6\"># 修改后，ping 走本地 hosts 指定的 IP</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#B392F0;--1:#B392F0\">ping</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\"> </span><span style=\"--0:#9ECBFF;--1:#9ECBFF\">linuxido.com</span><span style=\"--0:#E1E4E8;--1:#E1E4E8\">  </span><span style=\"--0:#99A0A6;--1:#99A0A6\"># 会尝试连 120.120.120.120</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>但注意，<code>dig</code>、<code>host</code>、<code>nslookup</code> 等工具在默认查询时还是会去 DNS 服务器（如 8.8.8.8）抓记录，不走 hosts，所以它们依然会返回真实的公网 IP。</p></section><section><h3 id=\"dns-劫持与污染\">DNS 劫持与污染<a class=\"anchor\" href=\"#dns-劫持与污染\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h3><p>真正的 DNS 劫持是指攻击者或中间人伪造 DNS 响应，把域名指向恶意 IP；<strong>DNS 缓存污染</strong>（DNS cache pollution）便是中毒后的 DNS 服务器缓存了错误的记录，导致所有下游用户都被“毒害”。</p><p>防范方法包括：</p><ul>\n<li>使用可信的 DNS-over-HTTPS（DoH）或 DNS-over-TLS（DoT）服务；</li>\n<li>开启 DNSSEC 验证，确保收到的响应带有数字签名且未被篡改。</li>\n</ul></section></section>\n<section><h2 id=\"用-hosts-实现科学上网\">用 hosts 实现科学上网<a class=\"anchor\" href=\"#用-hosts-实现科学上网\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>以 GitHub 为例：</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"text\" class=\"wrap\" style=\"--ecMaxLine:26ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#e1e4e8;--1:#e1e4e8\">20.205.243.166  github.com</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>当你修改 hosts，把 <code>github.com</code> 指向官方最快 IP，系统就不再走中国大陆的 DNS，而是直接根据本地映射去连接，这样就能“直连”GitHub。不过单靠 hosts 有时也不够流畅，通常还会配合 FastGithub 等加速工具一起使用。</p></section>","metadata":{"headings":[{"depth":2,"slug":"hosts-是什么","text":"hosts 是什么？#"},{"depth":2,"slug":"dns-是什么","text":"DNS 是什么？#"},{"depth":2,"slug":"dns-解析流程与多-ip-负载","text":"DNS 解析流程与多 IP 负载#"},{"depth":3,"slug":"修改-hosts-劫持解析","text":"修改 hosts 劫持解析#"},{"depth":3,"slug":"dns-劫持与污染","text":"DNS 劫持与污染#"},{"depth":2,"slug":"用-hosts-实现科学上网","text":"用 hosts 实现科学上网#"}],"localImagePaths":[],"remoteImagePaths":[],"frontmatter":{"title":"DNS的秘密日记～从hosts开始的物语（上）","published":"2024-09-23T00:00:00.000Z","description":"从hosts酱到DNS君的故事～带你认识域名解析的基础原理，理解为什么修改hosts能直连","image":"https://s3.yumeyuka.plus/2025/23-21-08.webp","tags":["DNS","hosts"],"category":"知识","draft":false,"minutes":6,"words":1144,"excerpt":"很久以前，互联网刚起步时，全世界的主机数量极少，域名解析完全依赖于每台设备本地的 hosts 文件。这份文件里记录了互联网上所有主机的域名和对应 IP 地址。当时并没有 DNS 服务器，大家只要从专门的维护站点下载最新的 hosts 文件，就能直接在本机通过它完成访问。想访问哪个域名，就翻开 hosts 文件，找到对应的 IP，连上就行了。"},"imagePaths":[]}},"collection":"posts","slug":"hosts_dns_part1"};
const umamiConfig = {"enable":true,"baseUrl":"https://eu.umami.is","shareId":"QA4C7dikiZNVwva3","timezone":"Asia/Shanghai"};
const unavailableText = "统计不可用。请检查是否屏蔽了Umami域名，如AdGuard和AdBlock等插件";
const viewsText = "浏览";
const visitsText = "访客";

    // 客户端统计文案生成函数
    function generateStatsText(pageViews, visits) {
        return `${viewsText} ${pageViews} · ${visitsText} ${visits}`;
    }

    // 获取文章浏览量统计
    async function fetchPostCardViews(slug) {
        if (!umamiConfig.enable) {
            return;
        }

        try {
            // 调用全局工具获取 Umami 分享数据
            const { websiteId, token } = await getUmamiShareData(umamiConfig.baseUrl, umamiConfig.shareId);

            // 第二步：获取统计数据
            const currentTimestamp = Date.now();
            const statsUrl = `${umamiConfig.baseUrl}/api/websites/${websiteId}/stats?startAt=0&endAt=${currentTimestamp}&unit=hour&timezone=${encodeURIComponent(umamiConfig.timezone)}&url=%2Fposts%2F${slug}%2F&compare=false`;

            const statsResponse = await fetch(statsUrl, {
                headers: {
                    'x-umami-share-token': token
                }
            });

            if (statsResponse.status === 401) {
                clearUmamiShareCache();
                return await fetchPostCardViews(slug);
            }

            if (!statsResponse.ok) {
                throw new Error('获取统计数据失败');
            }

            const statsData = await statsResponse.json();
            const pageViews = statsData.pageviews?.value || 0;
            const visits = statsData.visits?.value || 0;

            const displayElement = document.getElementById(`page-views-${slug}`);
            if (displayElement) {
                displayElement.textContent = generateStatsText(pageViews, visits);
            }
        } catch (error) {
            console.error('Error fetching page views for', slug, ':', error);
            const displayElement = document.getElementById(`page-views-${slug}`);
            if (displayElement) {
                displayElement.textContent = unavailableText;
            }
        }
    }

    // 页面加载完成后获取统计数据
    function initPostCardStats() {
        const slug = entry.slug;
        if (slug) {
            fetchPostCardViews(slug);
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPostCardStats);
    } else {
        initPostCardStats();
    }
})();</script>  </div> <div class="mx-auto onload-animation flex flex-row gap-3 justify-center" style="animation-delay: calc(var(--content-delay) + 250ms)"> <a href class="btn-card overflow-hidden rounded-lg text-[var(--primary)] w-11 h-11 disabled"> <svg width="1em" height="1em" class="text-[1.75rem]" data-icon="material-symbols:chevron-left-rounded">   <symbol id="ai:material-symbols:chevron-left-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="m10.8 12l3.9 3.9q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-4.6-4.6q-.15-.15-.212-.325T8.425 12t.063-.375t.212-.325l4.6-4.6q.275-.275.7-.275t.7.275t.275.7t-.275.7z"/></symbol><use href="#ai:material-symbols:chevron-left-rounded"></use>  </svg> </a> <div class="bg-[var(--card-bg)] flex flex-row rounded-lg items-center text-neutral-700 dark:text-neutral-300 font-bold"> <div class="h-11 w-11 rounded-lg bg-[var(--primary)] flex items-center justify-center
                    font-bold text-white dark:text-black/70"> 1 </div> </div> <a href class="btn-card overflow-hidden rounded-lg text-[var(--primary)] w-11 h-11 disabled"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="text-[1.75rem]" data-icon="material-symbols:chevron-right-rounded">   <use href="#ai:material-symbols:chevron-right-rounded"></use>  </svg> </a> </div>  <div class="footer col-span-2 onload-animation hidden lg:block"> <!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">--><div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div> <!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] dark:bg-black rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">--> <div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6"> <div class="transition text-50 text-sm text-center">
&copy; <span id="copyright-year">2025</span> 梦璃酱. All Rights Reserved. /
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="/rss.xml">RSS</a> /
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="/sitemap-index.xml">Sitemap</a><br>
Powered by
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/saicaca/fuwari">Fuwari</a> </div> </div> </div> </div> </main> <div class="footer col-span-2 onload-animation block lg:hidden"> <!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">--><div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div> <!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] dark:bg-black rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">--> <div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6"> <div class="transition text-50 text-sm text-center">
&copy; <span id="copyright-year">2025</span> 梦璃酱. All Rights Reserved. /
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="/rss.xml">RSS</a> /
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="/sitemap-index.xml">Sitemap</a><br>
Powered by
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
<a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/saicaca/fuwari">Fuwari</a> </div> </div> </div> </div> <!-- There can't be a filter on parent element, or it will break `fixed` --><div class="back-to-top-wrapper hidden lg:block" data-astro-cid-eymb5ayk> <div id="back-to-top-btn" class="back-to-top-btn hide flex items-center rounded-2xl overflow-hidden transition" onclick="backToTop()" data-astro-cid-eymb5ayk> <button aria-label="Back to Top" class="btn-card h-[3.75rem] w-[3.75rem]" data-astro-cid-eymb5ayk> <svg width="1em" height="1em" class="mx-auto" data-astro-cid-eymb5ayk="true" data-icon="material-symbols:keyboard-arrow-up-rounded">   <symbol id="ai:material-symbols:keyboard-arrow-up-rounded" viewBox="0 0 24 24"><path fill="currentColor" d="m12 10.8l-3.9 3.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l4.6-4.6q.3-.3.7-.3t.7.3l4.6 4.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275z"/></symbol><use href="#ai:material-symbols:keyboard-arrow-up-rounded"></use>  </svg> </button> </div> </div>  <script>
function backToTop() {
    window.scroll({ top: 0, behavior: 'smooth' });
}
</script> </div> </div>  <div class="absolute w-full z-0 hidden 2xl:block"> <div class="relative max-w-[var(--page-width)] mx-auto"> <!-- TOC component --> <div id="toc-wrapper" class="hidden lg:block transition absolute top-0 -right-[var(--toc-width)] w-[var(--toc-width)] items-center toc-hide"> <div id="toc-inner-wrapper" class="fixed top-14 w-[var(--toc-width)] h-[calc(100vh_-_20rem)] overflow-y-scroll overflow-x-hidden hide-scrollbar"> <div id="toc" class="w-full h-full transition-swup-fade "> <div class="h-8 w-full"></div> <script type="module">class l extends HTMLElement{tocEl=null;visibleClass="visible";observer;anchorNavTarget=null;headingIdxMap=new Map;headings=[];sections=[];tocEntries=[];active=[];activeIndicator=null;constructor(){super(),this.observer=new IntersectionObserver(this.markVisibleSection,{threshold:0})}markVisibleSection=t=>{t.forEach(e=>{const i=e.target.children[0]?.getAttribute("id"),s=i?this.headingIdxMap.get(i):void 0;s!=null&&(this.active[s]=e.isIntersecting),e.isIntersecting&&this.anchorNavTarget==e.target.firstChild&&(this.anchorNavTarget=null)}),this.active.includes(!0)||this.fallback(),this.update()};toggleActiveHeading=()=>{let t=this.active.length-1,e=this.active.length-1,i=-1;for(;t>=0&&!this.active[t];)this.tocEntries[t].classList.remove(this.visibleClass),t--;for(;t>=0&&this.active[t];)this.tocEntries[t].classList.add(this.visibleClass),e=Math.min(e,t),i=Math.max(i,t),t--;for(;t>=0;)this.tocEntries[t].classList.remove(this.visibleClass),t--;if(e>i)this.activeIndicator?.setAttribute("style","opacity: 0");else{let s=this.tocEl?.getBoundingClientRect().top||0,n=this.tocEl?.scrollTop||0,o=this.tocEntries[e].getBoundingClientRect().top-s+n,c=this.tocEntries[i].getBoundingClientRect().bottom-s+n;this.activeIndicator?.setAttribute("style",`top: ${o}px; height: ${c-o}px`)}};scrollToActiveHeading=()=>{if(this.anchorNavTarget||!this.tocEl)return;const t=document.querySelectorAll(`#toc .${this.visibleClass}`);if(!t.length)return;const e=t[0],i=t[t.length-1],s=this.tocEl.clientHeight;let n;i.getBoundingClientRect().bottom-e.getBoundingClientRect().top<.9*s?n=e.offsetTop-32:n=i.offsetTop-s*.8,this.tocEl.scrollTo({top:n,left:0,behavior:"smooth"})};update=()=>{requestAnimationFrame(()=>{this.toggleActiveHeading(),this.scrollToActiveHeading()})};fallback=()=>{if(this.sections.length)for(let t=0;t<this.sections.length;t++){let e=this.sections[t].getBoundingClientRect().top,i=this.sections[t].getBoundingClientRect().bottom;if(this.isInRange(e,0,window.innerHeight)||this.isInRange(i,0,window.innerHeight)||e<0&&i>window.innerHeight)this.markActiveHeading(t);else if(e>window.innerHeight)break}};markActiveHeading=t=>{this.active[t]=!0};handleAnchorClick=t=>{const e=t.composedPath().find(i=>i instanceof HTMLAnchorElement);if(e){const i=decodeURIComponent(e.hash?.substring(1)),s=this.headingIdxMap.get(i);s!==void 0?this.anchorNavTarget=this.headings[s]:this.anchorNavTarget=null}};isInRange(t,e,i){return e<t&&t<i}connectedCallback(){const t=document.querySelector(".prose");t?t.addEventListener("animationend",()=>{this.init()},{once:!0}):console.debug("Animation element not found")}init(){if(this.tocEl=document.getElementById("toc-inner-wrapper"),!!this.tocEl&&(this.tocEl.addEventListener("click",this.handleAnchorClick,{capture:!0}),this.activeIndicator=document.getElementById("active-indicator"),this.tocEntries=Array.from(document.querySelectorAll("#toc a[href^='#']")),this.tocEntries.length!==0)){this.sections=new Array(this.tocEntries.length),this.headings=new Array(this.tocEntries.length);for(let t=0;t<this.tocEntries.length;t++){const e=decodeURIComponent(this.tocEntries[t].hash?.substring(1)),i=document.getElementById(e),s=i?.parentElement;i instanceof HTMLElement&&s instanceof HTMLElement&&(this.headings[t]=i,this.sections[t]=s,this.headingIdxMap.set(e,t))}this.active=new Array(this.tocEntries.length).fill(!1),this.sections.forEach(t=>this.observer.observe(t)),this.fallback(),this.update()}}disconnectedCallback(){this.sections.forEach(t=>this.observer.unobserve(t)),this.observer.disconnect(),this.tocEl?.removeEventListener("click",this.handleAnchorClick)}}customElements.get("table-of-contents")||customElements.define("table-of-contents",l);</script> <div class="h-8 w-full"></div> </div> </div> </div> <!-- #toc needs to exist for Swup to work normally -->  </div> </div>  <!-- increase the page height during page transition to prevent the scrolling animation from jumping --> <div id="page-height-extend" class="hidden h-[300vh]" data-astro-cid-sckkx6r4 style="--bannerOffset: 30vh;--banner-height-home: 65vh;--banner-height: 35vh;--configHue: 305;--page-width: 75rem;"></div>  <script type="module" src="/_astro/Layout.astro_astro_type_script_index_0_lang.DAHrxWCB.js"></script> <script type="module" src="/_astro/Layout.astro_astro_type_script_index_1_lang.DiVSvlpu.js"></script></body></html>