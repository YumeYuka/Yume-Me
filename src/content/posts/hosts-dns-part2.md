---
title: DNS的秘密日记～从hosts开始的物语（下）
published: 2024-09-26
description: "从最初的HOSTS.TXT到如今庞大的DNS体系，这篇小日记记录了域名解析的发展历程"
image: "https://s3.yumeyuka.plus/2025/1758683286326.webp"
tags: ["DNS", "hosts"]
category: 知识
draft: false
---


# 域名解析系统的发展历程

随着互联网从实验性网络演进为全球信息基础设施，**域名解析系统（DNS）**也在不断演进，以满足规模、性能与安全方面的需求。以下从早期方案到现代机制，梳理其关键发展节点。

## 一、主机文件时代：HOSTS.TXT（1980 年代初）

在 DNS 出现之前，所有域名解析依赖于一份集中维护的文本文件—— **`HOSTS.TXT`**
- 由斯坦福研究所（SRI）网络信息中心（NIC）负责更新，记录域名与 IP 地址的对应关系
- 每台主机须定期下载并手动更新此文件，才能完成网址访问

随着联网设备激增，HOSTS.TXT 文件规模迅速膨胀，更新频率与分发成本骤增，系统效率和可扩展性难以为继

## 二、DNS 系统的诞生与层级化设计（1983 年）

为解决集中式方案的瓶颈，Paul Mockapetris 于 1983 年提出 DNS 概念，并在 RFC 882、RFC 883 中定义首版协议，后被 RFC 1034、RFC 1035 取代。  
DNS 的核心特点：  

- **分布式架构**：将域名空间拆分成多个负责不同子区的域名服务器。  
- **层级化命名**：以`“.”`分隔，从根（`Root`）到顶级域（TLD）、再到二级、三级域名，逐级查询并缓存结果。



### 1. 通用顶级域名（gTLD）  


> - .com：面向各类商业实体与企业的网站；
> - .org：主要供非营利组织及公益机构使用；
> - .net：最初为网络服务提供商设计，现广泛用于互联网基础设施相关站点；
> - .edu：专用于经认证的教育机构及其下属学术单位；
> - .gov/.mil：分别保留给美国政府机构与军事部门。


### 2. 国家和地区顶级域名（ccTLD）  
- 以 ISO 3166-1 alpha-2 两字母代码表示，例如 .cn（中国）、.uk（英国）。

### 3. 二级及多级域名

- **二级域名**：通常为组织或品牌标识，如 example.com 中的 example。  
- **三级域名**及更高级别，通常用于区分子业务或区域服务，如 www.example.com、mail.google.com。

![image-20250926173701750](https://s3.yumeyuka.plus/2025/09/38972fb919b93dc6969bd72161fa71a9.webp)

### 4. 安全扩展：DNSSEC（1990 年代末至今)

随着网络安全威胁加剧，原生 DNS 缺乏数据完整性与身份验证机制，易受到中间人和缓存投毒攻击。为此，**DNS 安全扩展（DNSSEC）**应运而生：  
- 对 DNS 记录链使用数字签名，确保查询结果未被篡改；  
- 客户端验证签名后，方可信任域名映射。

## 三、根域名服务器的全球部署

DNS 根服务器最初仅部署于美国境内。为降低查询延迟、提升容灾能力，13 个逻辑根服务器实例通过 Anycast 技术，现已分布在全球多个节点，由不同组织共同管理。  

### 为什么根服务器逻辑上只有 13 个？  
- **UDP 包大小限制**：DNS 查询默认使用 UDP，最大报文长度 512 字节；  
- **根提示文件**：需在此限制内携带所有根服务器的 IP 列表；  
- 13 个 IPv4 地址（另含 IPv6 扩展）恰能兼顾完整性与报文大小。

为了支持中文、阿拉伯文、韩文等非拉丁字符，**国际化域名（IDN**于 2000 年代推行。IDN 采用 Punycode 将 Unicode 字符映射为 ASCII，以兼容现有 DNS 协议，实现全球多语言域名互访。
